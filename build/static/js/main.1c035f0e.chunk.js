(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{218:function(e,t,a){},241:function(e,t,a){e.exports=a.p+"static/media/wave.86c27fea.svg"},242:function(e,t,a){e.exports=a.p+"static/media/play.65f03140.svg"},243:function(e,t,a){e.exports=a.p+"static/media/pause.a61933e8.svg"},248:function(e,t,a){e.exports=a.p+"static/media/1231.a1d62491.svg"},249:function(e,t,a){e.exports=a.p+"static/media/noChecked.5cab68c3.svg"},268:function(e,t,a){e.exports=a(536)},273:function(e,t,a){},274:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},363:function(e,t){},382:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},469:function(e,t,a){},514:function(e,t,a){},530:function(e,t,a){},531:function(e,t,a){},533:function(e,t,a){},534:function(e,t,a){},536:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(4),c=a.n(i),l=(a(273),a(541)),s=a(542),o=a(7),u=a(28),m=a(65),d=(a(274),a(2)),f=a.n(d),E=function(e){return r.a.createElement(m.a,Object.assign({},e,{className:f()("button",e.className,{"button--large":"large"===e.size})}))},g=(a(317),function(e){var t=e.children;return r.a.createElement("div",{className:"block"},t)}),h=a(5),p=(a(318),a(104)),v=a.n(p);v.a.defaults.baseURL=window.location.origin,v.a.defaults.headers.common.token=window.localStorage.token,window.axios=v.a;var b=v.a,_=function(){return b.get("/dialogs")},S=function(e,t){return b.post("/dialogs",{partner:e,text:t})},O=function(e){return b.get("/messages?dialog="+e)},y=function(e,t,a){return b.post("/messages",{text:e,dialog:t,attachments:a})},I=function(e){return b.delete("/messages?id="+e)},j=function(e){return b.post("/user/signin",e)},A=function(e){return b.post("/user/signup",e)},w=function(){return b.get("/user/me")},N=function(e){return b.get("/user/verify?hash=".concat(e))},D=function(e){return b.get("/user/find?query=".concat(e))},k=function(e){return b.get("/user/".concat(e))},M=function(e,t){return b.post("/user/avatar/".concat(e),{url:t})},C=function(e,t){return b.post("/user/edit/".concat(e),{fullname:t.fullname,email:t.email,bio:t.bio})},T=function(e){var t=new FormData;return t.append("file",e),b.post("/files",t,{headers:{"Content-Type":"multipart/form-data"}})},R=a(239),x=a.n(R)()(window.location.origin),U={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},setStatus:function(e){return{type:"DIALOGS:CHANGE_MESSAGE",payload:e}},setCurrentDialogId:function(e){return function(t){x.emit("DIALOGS:JOIN",e),t({type:"DIALOGS:SET_CURRENT_DIALOG_ID",payload:e})}},updateReadedStatus:function(e){return{type:"DIALOGS:LAST_MESSAGE_READED_STATUS",payload:{userId:e.userId,dialogId:e.dialogId}}},updateUnreadedStatus:function(e){return{type:"DIALOGS:SET_UNREADED",payload:e}},fetchDialogs:function(e){return function(t){_().then((function(a){var n=a.data;t(U.setDialogs(n)),t(U.updateUnreadedStatus(e))}))}}},L=U,V={setMessages:function(e){return{type:"MESSAGES:SET_ITEMS",payload:e}},onRemoveMessage:function(e){return function(t){t({type:"MESSAGES:REMOVE_MESSAGE",payload:e}),I(e).catch((function(e){t(V.setIsLoading(!1))}))}},addMessage:function(e){return function(t,a){a().dialogs.currentDialogId===window.location.pathname.split("dialog/")[1]&&t({type:"MESSAGES:ADD_MESSAGE",payload:e})}},fetchSendMessage:function(e){var t=e.text,a=e.dialogId,n=e.attachments;return function(e){return y(t,a,n)}},setIsLoading:function(e){return{type:"MESSAGES:SET_IS_LOADING",payload:e}},fetchMessages:function(e){return function(t){t(V.setIsLoading(!0)),O(e).then((function(e){var a=e.data;t(V.setMessages(a))})).catch((function(){t(V.setIsLoading(!1))}))}}},G=V,F=a(122),P=a.n(F),B=a(545),z=function(e){var t=e.text,a=e.type,n=void 0===a?"info":a,r=e.title,i=e.duration,c=void 0===i?3:i;B.a[n]({message:r,description:t,duration:c})},H=function(e){if(!e)return null;var t=e[0];return e.length&&"webm"===t.ext},W=a(176),J=a(264),Y=function(e){return Object(J.a)(e)?Object(W.a)(e,"HH:mm"):Object(W.a)(e,"dd/mm/yyyy")},Z={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},setIsAuth:function(e){return{type:"USER:SET_IS_AUTH",payload:e}},setChangeData:function(e){return{type:"USER:CHANGE_DATA",payload:e}},setData:function(e){return{type:"USER:SET_USER_DATA",payload:e}},setAvatar:function(e){return{type:"USER:SET_AVATAR",payload:e}},fetchUserData:function(){return function(e){w().then((function(t){var a=t.data;e(Z.setUserData(a))})).catch((function(t){403===t.response.status&&(e(Z.setIsAuth(!1)),delete window.localStorage.token)}))}},fetchUserLogin:function(e){return function(t){return j(e).then((function(e){var a=e.data,n=a.status,r=a.token;return"error"===n?z({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",type:"error"}):(z({text:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e!",title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430!",type:"success"}),t(Z.setUserData(a)),window.axios.defaults.headers.common.token=r,window.localStorage.token=r,t(Z.fetchUserData()),t(Z.setIsAuth(!0))),a}))}},fetchUserRegister:function(e){return function(t){return A(e)}},getUserById:function(e){return function(t){return k(e).then((function(e){var a=e.data;t(Z.setData(a))}))}},setUserAvatar:function(e,t){return function(a){return T(e).then((function(e){var a=e.data;return M(t,a.file.url)})).then((function(e){var t=e.data;return a(Z.setAvatar(t.file.avatar))}))}},setChangeInfo:function(e,t){return function(a){return C(e,t).then((function(e){var t=e.data;return a(Z.setChangeData(t.info))}))}}},q=Z,X={setAttachments:function(e){return{type:"ATTACHMENTS:SET_ITEMS",payload:e}},removeAttachments:function(e){return{type:"ATTACHMENTS:REMOVE_ITEM",payload:e}}},K=a(19),$=Object(K.b)((function(e){return e.dialogs}),L)((function(e){var t=e.items,a=e.fetchDialogs,i=e.setCurrentDialogId,c=e.currentDialogId,l=e.userId,s=e.updateReadedStatus,o=Object(n.useState)(""),u=Object(h.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(Array.from(t)),E=Object(h.a)(f,2),g=E[0],p=E[1],v=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";p(t.filter((function(t){return t.author.fullname.toLowerCase().indexOf(e.toLowerCase())>=0||t.partner.fullname.toLowerCase().indexOf(e.toLowerCase())>=0}))),d(e)}),[t]);return Object(n.useEffect)((function(){i(window.location.pathname.split("dialog/")[1])}),[t,i]),Object(n.useEffect)((function(){t.length&&v()}),[t,v]),Object(n.useEffect)((function(){var e=function(){a(l)};return a(l),x.on("SERVER:DIALOG_CREATED",e),x.on("SERVER:NEW_MESSAGE",e),x.on("SERVER:MESSAGES_READED",s),function(){x.removeListener("SERVER:DIALOG_CREATED",e),x.removeListener("SERVER:NEW_MESSAGE",e)}}),[a,s,l]),g.forEach((function(e){e.author._id===l?e.friend=e.partner:e.friend=e.author})),r.a.createElement(Ve,{userId:l,items:g,onSearch:v,inputValue:m,currentDialogId:c})})),Q=a(92),ee=Object(K.b)((function(e){var t=e.messages,a=e.dialogs,n=e.user,r=e.attachments;return{currentDialogId:a.currentDialogId,items:t.items,attachments:r.items,isLoading:t.isLoading,user:n.data}}),G)((function(e){var t=e.isLoading,a=e.currentDialogId,i=e.fetchMessages,c=e.items,l=e.addMessage,s=e.user,o=e.onRemoveMessage,u=e.attachments,m=e.isVisiable,d=e.setIsVisiable,f=Object(n.useState)(null),E=Object(h.a)(f,2),g=E[0],p=E[1],v=Object(n.useState)(135),b=Object(h.a)(v,2),_=b[0],S=b[1],O=Object(n.useRef)(null);return Object(n.useEffect)((function(){u.length?S(245):S(135)}),[u]),Object(n.useEffect)((function(){x.on()}),[]),Object(n.useEffect)((function(){var e=function(e){l(e)};return a&&i(a),x.on("SERVER:NEW_MESSAGE",e),function(){return x.removeListener("SERVER:NEW_MESSAGE",e)}}),[a,i,l]),Object(n.useEffect)((function(){O.current&&O.current.scrollTo(0,9999)}),[c]),""===a?r.a.createElement(Q.a,{description:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}):r.a.createElement(je,{isVisiable:m,setIsVisiable:d,items:c,isLoading:t,user:s,blockHeight:_,blockRef:O,onRemoveMessage:o,setPreviewImage:p,previewImage:g})})),te=a(12),ae=a(67),ne=a.n(ae),re=a(135),ie=Object(K.b)((function(e){var t=e.dialogs,a=e.attachments,n=e.user;return{dialogs:t,attachments:a.items,user:n.data}}),Object(te.a)({},G,{},X))((function(e){var t=e.dialogs.currentDialogId,a=e.attachments,i=e.fetchSendMessage,c=e.setAttachments,l=e.removeAttachments,s=e.user;window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia||window.navigator.webkitGetUserMedia;var o=Object(n.useState)(""),u=Object(h.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(""),E=Object(h.a)(f,2),g=E[0],p=E[1],v=Object(n.useState)(null),b=Object(h.a)(v,2),_=b[0],S=b[1],O=Object(n.useState)(!1),y=Object(h.a)(O,2),I=y[0],j=y[1],A=Object(n.useState)(!1),w=Object(h.a)(A,2),N=w[0],D=w[1],k=function(e){var t=new MediaRecorder(e);S(t),t.start(),t.onstart=function(){p(!0)},t.onstop=function(){p(!1)},t.ondataavailable=function(e){var t=new File([e.data],"audio.webm");D(!0),T(t).then((function(e){var t=e.data;R(t.file._id).then((function(){D(!1)}))}))}},M=function(e){console.log("The following error occured: "+e)},C=function(e,t){e&&!e.contains(t.target)&&j(!1)},R=function(e){return i({text:null,dialogId:t,attachments:[e]})},U=function(){g?_.stop():(m||a.length)&&(i({text:m,dialogId:t,attachments:a.map((function(e){return e.uid}))}),d(""),c([]))};return Object(n.useEffect)((function(){var e=document.querySelector(".chat-input__smile-btn");return document.addEventListener("click",C.bind(void 0,e)),function(){document.removeEventListener("click",C.bind(void 0,e))}}),[]),r.a.createElement(ze,{value:m,setValue:d,emojiPickerVisible:I,toggleEmojiPicker:function(){j(!I)},addEmoji:function(e){var t=e.colons;d((m+" "+t).trim())},handleSendMessage:function(e){x.emit("DIALOGS:TYPING",{dialogId:t,user:s}),13===e.keyCode&&U()},sendMessage:U,onSelectFiles:function(e){var t,a,n;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=[],a=function(a){var n,r;return ne.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e[a],r=Math.round(1e3*Math.random()),t=[].concat(Object(re.a)(t),[{uid:r,name:n.name,status:"uploading"}]),c(t),i.next=6,ne.a.awrap(T(n).then((function(e){var a=e.data;t=t.map((function(e){return e.uid===r?{status:"done",uid:a.file._id,name:a.file.filename,url:a.file.url}:e}))})));case 6:case"end":return i.stop()}}),null,this)},n=0;case 3:if(!(n<e.length)){r.next=9;break}return r.next=6,ne.a.awrap(a(n));case 6:n++,r.next=3;break;case 9:c(t);case 10:case"end":return r.stop()}}),null,this)},attachments:a,isRecording:g,onRecord:function(){navigator.getUserMedia&&navigator.getUserMedia({audio:!0},k,M)},onHideRecording:function(){p(!1)},isLoading:N,removeAttachments:l})})),ce=Object(K.b)((function(e){var t=e.dialogs,a=e.user;return{dialogs:t.items,currentDialogId:t.currentDialogId,user:a.data}}),Object(te.a)({},q,{},L))((function(e){var t=e.currentDialogId,a=e.user,n=e.dialogs,i=e.setIsVisiable,c=e.isVisiable,l=e.getUserById;if(!n.length||!t)return null;var s=n.filter((function(e){return e._id===t}))[0],o={};s&&(o=s.author._id===a._id?s.partner:s.author);return r.a.createElement(Fe,{handleGetUserById:function(e){l(e).finally((function(){return i(!c)}))},online:o.isOnline,fullname:o.fullname,setIsVisiable:i,isVisiable:c,user:a})})),le=Object(K.b)((function(e){var t=e.user;e.dialogs;return{user:t.data}}))((function(e){var t=e.user,a=Object(n.useState)(!1),i=Object(h.a)(a,2),c=i[0],l=i[1],s=Object(n.useState)(""),o=Object(h.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(""),f=Object(h.a)(d,2),E=f[0],g=f[1],p=Object(n.useState)([]),v=Object(h.a)(p,2),b=v[0],_=v[1],O=Object(n.useState)(!1),y=Object(h.a)(O,2),I=y[0],j=y[1],A=Object(n.useState)(!1),w=Object(h.a)(A,2),N=w[0],k=w[1],M=function(){l(!1)};return r.a.createElement(Ze,{user:t,users:b,messageValue:E,inputValue:u,handleSearch:function(e){j(!0),D(e).then((function(e){var t=e.data;_(t),j(!1)})).catch((function(){j(!1)}))},handleChangeMessage:function(e){g(e.target.value)},handleChange:function(e){m(e)},onClose:M,selectedUserId:N,onShow:function(){l(!0)},visible:c,Isloading:I,onAddDialog:function(){S(N,E).then((function(e){e.data;M()})).catch((function(e){}))},onSelectUser:function(e){k(e)}})})),se=Object(K.b)((function(e){var t=e.user,a=e.dialogs;return{userData:t.userData,dialogs:a.currentDialogId,userId:t.data._id}}),q)((function(e){var t=e.userData,a=e.userId,i=e.setUserAvatar,c=e.dialogs,l=e.isVisiable,s=e.setIsVisiable,o=Object(n.useState)(!1),u=Object(h.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(!1),E=Object(h.a)(f,2),g=E[0],p=E[1],v=Object(n.useState)(null),b=Object(h.a)(v,2),_=b[0],S=b[1];return r.a.createElement(rt,{isDoneAvatar:g,setIsDoneAvatar:p,userData:t,uploadAvatar:function(e){t&&i(e,t._id).finally((function(){return p(!1)}))},userId:a,isEdit:m,isVisiable:l,setIsVisiable:s,setIsEdit:d,setPreviewImage:S,previewImage:_,currentDialogId:c})})),oe=Object(K.b)((function(e){return e.dialogs}),q)((function(e){var t=e.getUserById,a=e.isVisiable,n=e.setIsVisiable,i=e.user,c=e.noWay;return r.a.createElement(Ge,{isVisiable:a,setIsVisiable:n,handleGetUserById:function(e){t(e).finally((function(){return n(!a)}))},user:i,noWay:c})})),ue=a(126),me=Object(K.b)((function(e){return e.user}),q)((function(e){var t=e.setChangeInfo,a=e.data,i=e.modal,c=e.setModal,l=Object(n.useState)({fullname:a.fullname,email:a.email,bio:a.bio}),s=Object(h.a)(l,2),o=s[0],u=s[1];return r.a.createElement(it,{value:o,modal:i,setModal:c,handleChangeInput:function(e){u(Object(te.a)({},o,Object(ue.a)({},e.target.name,e.target.value)))},handleChangeData:function(){return""===o.fullname?o.fullname=a.fullname:o.fullname,""===o.email?o.email=a.email:o.email,""===o.bio?o.bio=a.bio:o.bio,t(a._id,o)}})})),de=a(538),fe=a(241),Ee=a.n(fe),ge=a(242),he=a.n(ge),pe=a(243),ve=a.n(pe),be=a(102),_e=a.n(be),Se=a(78),Oe=function(e){var t=e.text,a=e.date,i=e.user,c=e.isMe,l=e.readed,s=e.attachments,u=e.isTyping,d=e.audio,E=e.onRemoveMessage,g=e.setPreviewImage,p=e.isVisiable,v=e.setIsVisiable,b=function(e){var t=e.audioSrc,a=Object(n.useRef)(null),i=Object(n.useState)(!1),c=Object(h.a)(i,2),l=c[0],s=c[1],o=Object(n.useState)(0),u=Object(h.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(0),E=Object(h.a)(f,2),g=E[0],p=E[1];return Object(n.useEffect)((function(){a.current.addEventListener("playing",(function(){s(!0)}),!1),a.current.addEventListener("ended",(function(){s(!1),d(0),p(0)}),!1),a.current.addEventListener("pause",(function(){s(!1)}),!1),a.current.addEventListener("timeupdate",(function(){var e=a.current&&a.current.duration||0;p(a.current.currentTime),d(a.current.currentTime/e*100)}))}),[]),r.a.createElement("div",{className:"message__audio"},r.a.createElement("audio",{ref:a,src:t,preload:"auto"}),r.a.createElement("div",{className:"message__audio-progress",style:{width:m+"%"}}),r.a.createElement("div",{className:"message__audio-info"},r.a.createElement("div",{className:"message__audio-btn"},r.a.createElement("button",{onClick:function(){l?a.current.pause():a.current.play()}},l?r.a.createElement("img",{src:ve.a,alt:"Pause svg"}):r.a.createElement("img",{src:he.a,alt:"Play svg"}))),r.a.createElement("div",{className:"message__audio-wave"},r.a.createElement("img",{src:Ee.a,alt:"Wave svg"})),r.a.createElement("span",{className:"message__audio-duration"},function(e){var t=Math.floor(e/60),a=(e%60).toFixed();return"".concat(t<10?"0":"").concat(t,":").concat(a<10?"0":"").concat(a)}(g))))};return r.a.createElement("div",{className:f()("message",{"message--isme":c,"message--is-typing":u,"message--image":H(s)&&s&&1===s.length&&!t,"message--is-audio":H(s)})},r.a.createElement("div",{className:"message__content"},r.a.createElement(xe,{isMe:c,isReaded:l}),c&&r.a.createElement(de.a,{content:r.a.createElement("div",null,r.a.createElement(m.a,{onClick:E},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),trigger:"click"},r.a.createElement("div",{className:"message__icon-actions"},r.a.createElement(m.a,{type:"link",shape:"circle",icon:"ellipsis"}))),r.a.createElement("div",{className:"message__avatar"},r.a.createElement(oe,{user:i,setIsVisiable:v,isVisiable:p,noWay:!0})),r.a.createElement("div",{className:"message__info"},r.a.createElement("div",{className:"message__user"},i.fullname),(t||u)&&r.a.createElement("div",{className:"message__bubble"},t&&r.a.createElement("p",{className:"message__text"},_e()(t,/:(.+?):/g,(function(e,t){return r.a.createElement(Se.a,{emoji:e,set:"apple",size:24,key:t,className:"smile"})}))),u&&r.a.createElement("div",{className:"message__typing"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),d&&r.a.createElement(b,{audioSrc:d}),s&&r.a.createElement("div",{className:"message__attachments"},s.map((function(e){return function(e){return"webm"!==e.ext?r.a.createElement("div",{onClick:function(){return g(e.url)},key:e._id,className:"message__attachments-item"},r.a.createElement("div",{className:"message__attachments-item-overlay"},r.a.createElement(o.a,{type:"eye",style:{color:"white",fontSize:"18px"}})),r.a.createElement("img",{src:e.url,alt:"123"})):r.a.createElement(b,{audioSrc:e.url,key:e._id})}(e)}))),a&&r.a.createElement("span",{className:"message__date"},r.a.createElement(ke,{date:a})))))},ye=a(539),Ie=a(544),je=(a(382),function(e){var t=e.blockRef,a=e.isLoading,n=e.items,i=e.user,c=e.onRemoveMessage,l=e.blockHeight,s=e.previewImage,o=e.setPreviewImage,u=e.setIsVisiable,m=e.isVisiable;return r.a.createElement("div",{className:"chat__dialog-messages",style:{height:"calc(100% - ".concat(l,"px)")}},r.a.createElement("div",{ref:t,className:f()("messages",{"messages--loading":a})},a?r.a.createElement(ye.a,{tip:"Loading...",size:"large"}):n&&n.length?n.map((function(e,t){return r.a.createElement(Oe,Object.assign({isVisiable:m,setIsVisiable:u,key:t},e,{onRemoveMessage:c.bind(void 0,e._id),setPreviewImage:o,isMe:i._id===e.user._id}))})):r.a.createElement(Q.a,{description:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}),r.a.createElement(Ie.a,{width:"600px",visible:!!s,footer:null,onCancel:function(){return o(null)}},r.a.createElement("img",{src:s,style:{width:"100%"},alt:"prewiew"}))))}),Ae=(a(218),a(129)),we=function(e){var t=e._id,a=e.isMe,n=e.currentDialogId,i=e.lastMessage,c=e.userId,l=e.partner,s=e.friend;return n=window.location.pathname.split("dialog/")[1],console.log(i),r.a.createElement(u.b,{to:"/dialog/".concat(t)},r.a.createElement("div",{className:f()("dialogs__item",{"dialogs__item--online":l.isOnline,"dialogs__item--selected":n===t})},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement(Ge,{user:s})),r.a.createElement("div",{className:"dialogs__item-info"},r.a.createElement("div",{className:"dialogs__item-info-top"},r.a.createElement("b",null,s.fullname),r.a.createElement("span",null,null!==i.createdAt?Y(Object(Ae.a)(i.createdAt)):"")),r.a.createElement("div",{className:"dialogs__item-info-bottom"},r.a.createElement("p",null,function(e,t){return null===e.text?e.user._id===t?"You: Voice message":"Voice message":""===e.text&&e.attachments?e.user._id===t?"You: attachments":"attachments":e.user._id===t?_e()(e.text,/:(.+?):/g,(function(e,t){return r.a.createElement(Se.a,{emoji:e,set:"apple",size:24,key:t})})):e.text&&_e()(e.text,/:(.+?):/g,(function(e,t){return r.a.createElement(Se.a,{emoji:e,set:"apple",size:24,key:t})}))}(i,c)),a&&r.a.createElement(xe,{isMe:!0,isReaded:i.readed}),i.unreaded>0&&!1===i.readed?r.a.createElement("div",{className:"dialogs__item-info-bottom-count"},i.unreaded>9?"+9":i.unreaded):null))))},Ne=a(262),De=a(263),ke=function(e){var t=e.date;return r.a.createElement(r.a.Fragment,null,Object(Ne.a)(t,{addSuffix:!0,locale:De.a}))},Me=a(248),Ce=a.n(Me),Te=a(249),Re=a.n(Te),xe=function(e){var t=e.isMe,a=e.isReaded;return t&&(a?r.a.createElement("img",{alt:"123",src:Ce.a,className:"message__icon-readed"}):r.a.createElement("img",{src:Re.a,alt:"123",className:" message__icon-readed message__icon-readed--no"}))},Ue=a(250),Le=a.n(Ue),Ve=function(e){var t=e.items,a=e.userId,n=e.onSearch,i=e.inputValue,c=e.currentDialogId;return r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:"dialogs__search"},r.a.createElement(s.a.Search,{placeholder:"....",style:{width:200},onChange:function(e){return n(e.target.value)},value:i})),t.length?Le()(t,["created_at"],["desc"]).map((function(e,n){return r.a.createElement(we,Object.assign({key:n},e,{userId:a,items:t,friend:e.friend,unreaded:0,currentDialogId:c,isMe:e.author._id===a}))})):r.a.createElement(Q.a,{image:Q.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}))},Ge=(a(463),function(e){var t=e.user,a=e.handleGetUserById,n=e.noWay,i=function(e){n&&a(e)};if(t.avatar)return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"avatar",src:t.avatar,alt:"Avatar ".concat(t.fullname),onClick:function(){i(t.id)}}));var c=function(e){var t=e.substr(e.length-3,e.length).split("").map((function(e){return(t=e.charCodeAt(0))>255?255:t<0?0:t>255?255:t<0?0:t;var t})),a=Object(h.a)(t,3),n=a[0],r=a[1],i=a[2];return{color:P()({r:n,g:r,b:i}).lighten(10).saturate(10).toHexString(),colorLighten:P()({r:n,g:r,b:i}).lighten(30).saturate(30).toHexString()}}(t.id),l=c.color,s=c.colorLighten,o=t.fullname[0].toUpperCase();return r.a.createElement("div",{onClick:function(){i(t.id)},style:{background:"linear-gradient(135deg, ".concat(l," 0%, ").concat(s," 96.52%)")},className:"avatar avatar--symbol"},o)}),Fe=(a(464),function(e){var t=e.online,a=e.fullname,i=e.handleGetUserById,c=e.user,l=Object(n.useState)(!1),s=Object(h.a)(l,2),o=s[0],d=s[1];return r.a.createElement("div",{className:"chat__dialog-header"},r.a.createElement("div",{className:"chat__dialog-header-center"},r.a.createElement("b",{className:"chat__dialog-header-username"},a),r.a.createElement("div",{className:"chat__dialog-header-status"},r.a.createElement("span",{className:f()("status",{"status--online":t})},t?"\u043e\u043d\u043b\u0430\u0439\u043d":"\u043e\u0444\u043b\u0430\u0439\u043d"))),r.a.createElement(de.a,{visible:o,onVisibleChange:function(){return d(!o)},className:"chat__dialog-header-action",content:r.a.createElement("div",{className:"chat__dialog-header-action-content"},r.a.createElement("p",null,r.a.createElement(m.a,{onClick:function(){i(c._id),d(!o)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),r.a.createElement("p",null,r.a.createElement(m.a,null,r.a.createElement(u.b,{to:"/signIn"},"\u0412\u044b\u0439\u0442\u0438")))),trigger:"click"},r.a.createElement("div",null,r.a.createElement(m.a,{type:"link",shape:"circle",icon:"ellipsis","aria-label":""}))))}),Pe=a(252),Be=(a(469),s.a.TextArea),ze=function(e){var t=e.emojiPickerVisible,a=e.value,i=e.addEmoji,c=e.setValue,l=e.handleSendMessage,s=e.sendMessage,o=e.toggleEmojiPicker,u=e.attachments,d=e.onSelectFiles,f=e.isRecording,E=e.onRecord,g=e.onHideRecording,h=e.removeAttachments,p=e.isLoading;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",null,r.a.createElement("div",{className:"chat-input__smile-btn"},r.a.createElement("div",{className:"chat-input__emoji-picker"},t&&r.a.createElement(Se.b,{onSelect:function(e){return i(e)},set:"apple"})),r.a.createElement(m.a,{onClick:o,type:"link",shape:"circle",icon:"smile"})),f?r.a.createElement("div",{className:"chat-input__record-status"},r.a.createElement("i",{className:"chat-input__record-status-bubble"}),"Recording...",r.a.createElement(m.a,{onClick:g,type:"link",shape:"circle",icon:"close",className:"stop-recording"})):r.a.createElement(Be,{onChange:function(e){return c(e.target.value)},onKeyUp:l,size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u2026",value:a,autoSize:{minRows:1,maxRows:6}}),r.a.createElement("div",{className:"chat-input__actions"},r.a.createElement(Pe.UploadField,{onFiles:d,containerProps:{className:"chat-input__actions-upload-btn"},uploadProps:{accept:".jpg,.jpeg,.png,.gif,.bmp",multiple:"multiple"}},r.a.createElement(m.a,{id:"attach",type:"link",shape:"circle",icon:"camera"}),r.a.createElement("label",{htmlFor:"attach"})),p?r.a.createElement(m.a,{type:"link",shape:"circle",icon:"loading"}):f||a||u.length?r.a.createElement(m.a,{onClick:s,type:"link",shape:"circle",icon:"check-circle"}):r.a.createElement("div",{className:"chat-input__record-btn"},r.a.createElement(m.a,{onClick:E,type:"link",shape:"circle",icon:"audio"})))),u.length>0&&r.a.createElement("div",{className:"chat-input__attachments"},r.a.createElement(Ke,{removeAttachments:h,attachments:u}))))},He=function(e){var t=e.touched,a=e.type,n=e.errors,i=e.name,c=e.icon,u=e.values,m=e.handleBlur,d=e.handleChange,f=e.placeholder;return r.a.createElement(l.a.Item,{validateStatus:t[i]?n[i]?"error":"success":"",hasFeedback:!0,help:t[i]?n[i]:""},r.a.createElement(s.a,{id:i,type:a,size:"large",prefix:r.a.createElement(o.a,{type:c,style:{color:"rgba(0,0,0,.25)"}}),placeholder:f,value:u[i],onChange:d,onBlur:m}))},We=a(543),Je=(a(514),We.a.Option),Ye=s.a.TextArea,Ze=function(e){var t=e.user,a=e.users,n=e.onClose,i=e.onShow,c=e.visible,s=e.Isloading,u=e.inputValue,d=e.handleChange,f=e.handleSearch,E=e.onSelectUser,g=e.onAddDialog,h=e.messageValue,p=e.handleChangeMessage,v=e.selectedUserId,b=a.map((function(e){return r.a.createElement(Je,{key:e._id},e.fullname)}));return r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header"},r.a.createElement("div",null,r.a.createElement(o.a,{type:"team","aria-label":""}),r.a.createElement("span",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432")),r.a.createElement(m.a,{onClick:i,type:"link",shape:"circle",icon:"form"})),r.a.createElement("div",{className:"chat__sidebar-dialogs"},t&&r.a.createElement($,{userId:t&&t._id})),r.a.createElement(Ie.a,{title:"Add dialog",visible:c,onOk:g,onCancel:n,footer:[r.a.createElement(m.a,{key:"black",onClick:n,style:{width:100}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),r.a.createElement(m.a,{style:{width:100},disabled:!h,key:"submit",type:"primary",loading:s,onClick:g},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")]},r.a.createElement(l.a,null,r.a.createElement(l.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 E-Mail"},r.a.createElement(We.a,{showSearch:!0,value:u,placeholder:"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",style:{width:"100%"},defaultActiveFirstOption:!1,showArrow:!1,onSelect:E,filterOption:!1,onSearch:f,onChange:d,notFoundContent:null},b)),v&&r.a.createElement(l.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"},r.a.createElement(Ye,{placeholder:"\u0412\u0430\u0448\u0435 \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:h,onChange:p,autosize:{minRows:2,maxRows:6}})))))},qe=a(540);function Xe(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Ke=function(e){var t=e.attachments,a=e.removeAttachments,i=Object(n.useState)(!1),c=Object(h.a)(i,2),l=c[0],s=c[1],o=Object(n.useState)(),u=Object(h.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(),E=Object(h.a)(f,2),g=E[0],p=E[1];Object(n.useEffect)((function(){d(t)}),[t]);return r.a.createElement("div",{className:"clearfix"},r.a.createElement(qe.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:m,onPreview:function(e){return ne.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,ne.a.awrap(Xe(e.originFileObj));case 3:e.preview=t.sent;case 4:p(e.url||e.preview),s(!0);case 6:case"end":return t.stop()}}),null,this)},onChange:function(e){var t=e.fileList;return d(t)},onRemove:function(e){return a(e)}}),r.a.createElement(Ie.a,{visible:l,footer:null,onCancel:function(){return s(!1)}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:g})))},$e=(a(530),a(547)),Qe=a(548),et=a(549),tt=a(550),at=a(551),nt=a(552);function rt(e){var t=e.userData,a=e.uploadAvatar,i=e.isDoneAvatar,c=e.setIsDoneAvatar,l=e.userId,s=e.currentDialogId,o=e.setIsVisiable,m=e.isVisiable,d=e.previewImage,f=e.setPreviewImage,E=Object(n.useState)(!1),g=Object(h.a)(E,2),p=g[0],v=g[1];return console.log(t),null!==t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay"}),r.a.createElement("div",{className:"modal_container"},r.a.createElement("div",{className:"modal_container__main"},t.id&&r.a.createElement("div",{className:"modal_container__main-header"},r.a.createElement("div",{className:"modal_container__main-header-upper"},r.a.createElement("p",null,"Settings"),r.a.createElement("div",{className:"modal_container__main-header-upper-right"},l===t._id&&r.a.createElement("div",null,r.a.createElement("p",{onClick:function(){return v(!p)}},"Edit"),r.a.createElement(Ie.a,{visible:p,width:"400px",onOk:function(){v(!p)},onCancel:function(){v(!p)},footer:"",centered:!0},r.a.createElement(me,{setModal:v,modal:p}))),r.a.createElement("p",{onClick:function(){return o(!m)}},"Close"))),r.a.createElement("div",null,i&&r.a.createElement($e.a,{className:"profile_loader",style:{color:"black"}})),r.a.createElement("div",{className:"modal_container__main-header-block"},r.a.createElement("div",{className:"modal_container__main-header-avatar",onClick:function(){return f(t.avatar)}},r.a.createElement(oe,{user:t})),r.a.createElement("div",{className:"modal_container__main-header-info"},r.a.createElement("p",null,t.fullname),r.a.createElement("p",{className:"modal_container__main-header-info-status"},t.isOnline?"Online":"last seen ".concat(Y(Object(Ae.a)(t.last_seen))))),l===t._id?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",id:"file",onChange:function(e){c(!0),a(e.target.files[0])}}),r.a.createElement("label",{htmlFor:"file",className:"btn-3"},r.a.createElement(Qe.a,{style:{fontSize:"22px"}}))):r.a.createElement("div",{className:"modal_container__main-header-info-redirect"},r.a.createElement(u.b,{to:"/dialog/".concat(s),onClick:function(){o(!m)}},r.a.createElement(et.a,{style:{fontSize:"30px"}}))))),r.a.createElement("div",{className:"modal_container__main-body"},r.a.createElement("div",{className:"modal_container__main-body-item"},r.a.createElement(tt.a,null),r.a.createElement("div",null,t.email),r.a.createElement("div",null,"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430")),r.a.createElement("div",{className:"modal_container__main-body-item"},r.a.createElement(tt.a,null),t.bio.startsWith("https://")?r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.bio},t.bio):r.a.createElement("div",null,t.bio),r.a.createElement("div",null,"Bio")),r.a.createElement("div",{className:"modal_container__main-body-item"},r.a.createElement(at.a,null),r.a.createElement("div",null,t.id),r.a.createElement("div",null,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440")),r.a.createElement("div",{className:"modal_container__main-body-item"},r.a.createElement(nt.a,null),r.a.createElement("div",null,t.createdAt),r.a.createElement("div",null,"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438")),r.a.createElement("hr",{style:{color:"#ebebeb",marginTop:20,marginBottom:20}})))),r.a.createElement(Ie.a,{width:"650px",style:{zIndex:9999999999},visible:!!d,footer:null,onCancel:function(){return f(null)}},r.a.createElement("img",{src:d,style:{width:"100%"},alt:"prewiew"})))}a(531);var it=function(e){var t=e.value,a=e.handleChangeInput,n=e.handleChangeData,i=e.modal,c=e.setModal;return r.a.createElement("div",{className:"edit"},r.a.createElement("h4",null,"Edit profile"),r.a.createElement("div",{className:"pd"},r.a.createElement(s.a,{placeholder:"fullname",name:"fullname",value:t.fullname,onChange:a}),r.a.createElement(s.a,{placeholder:"email",name:"email",value:t.email,onChange:a}),r.a.createElement(s.a,{placeholder:"bio",name:"bio",value:t.bio,onChange:a}),r.a.createElement("div",{className:"edit__btn"},r.a.createElement(E,{onClick:function(){n(),c(!i)}},"Edit"))))},ct=function(e){var t=e.values,a=e.touched,n=e.errors,i=e.handleChange,c=e.handleBlur,m=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(g,null,r.a.createElement(l.a,{onSubmit:m,className:"login-form"},r.a.createElement(l.a.Item,{validateStatus:a.email?n.email?"error":"success":"",hasFeedback:!0,help:a.email?n.email:""},r.a.createElement(s.a,{id:"email",size:"large",prefix:r.a.createElement(o.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-Mail",value:t.email,onChange:i,onBlur:c})),r.a.createElement(l.a.Item,{validateStatus:a.password?n.password?"error":"success":"",hasFeedback:!0,help:a.password?n.password:""},r.a.createElement(s.a,{id:"password",size:"large",type:"password",value:t.password,prefix:r.a.createElement(o.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:i,onBlur:c})),r.a.createElement(l.a.Item,null,r.a.createElement(E,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button",onClick:m},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(u.b,{to:"/signUp",className:"auth__register-link"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))},lt=a(132),st=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 E-Mail"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail"},password:function(e){e||(n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c")},password2:function(e){t||e===a.password||(n.password2="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),e||(n.password2="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c")},fullname:function(e){t||e||(n.fullname="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e")}};Object.keys(a).forEach((function(e){return r[e]&&r[e](a[e],n)}))},ot=a(64),ut=a(261),mt={items:[],currentDialogId:window.location.pathname.split("dialog/")[1],isLoading:!1},dt={items:[],isLoading:!1},ft={data:null,userData:null,token:window.localStorage.token,isAuth:!!window.localStorage.token},Et={items:[]},gt=Object(ot.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"DIALOGS:SET_ITEMS":return Object(te.a)({},e,{items:n});case"DIALOGS:SET_CURRENT_DIALOG_ID":return Object(te.a)({},e,{currentDialogId:n});case"DIALOGS:CHANGE_MESSAGE":return Object(te.a)({},e,{items:Object(te.a)({},e.items.lastMessage,{readed:n})});case"DIALOGS:SET_UNREADED":return Object(te.a)({},e,{items:e.items.map((function(e){return e.lastMessage.unreaded=e.messages.filter((function(e){return!0!==e.readed&&e.user!==n})).length,e}))});case"DIALOGS:LAST_MESSAGE_READED_STATUS":return Object(te.a)({},e,{items:e.items.map((function(e){return e._id===n.dialogId&&(e.lastMessage.readed=!0),e}))});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MESSAGES:ADD_MESSAGE":return Object(te.a)({},e,{items:[].concat(Object(re.a)(e.items),[n])});case"MESSAGES:SET_ITEMS":return Object(te.a)({},e,{items:n,isLoading:!1});case"MESSAGES:REMOVE_MESSAGE":return Object(te.a)({},e,{items:e.items.filter((function(e){return e._id!==n}))});case"DIALOGS:LAST_MESSAGE_READED_STATUS":return Object(te.a)({},e,{items:e.items.map((function(e){return e.dialog._id===n.dialogId&&(e.readed=!0),e}))});case"MESSAGES:SET_IS_LOADING":return Object(te.a)({},e,{isLoading:n});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER:SET_DATA":return Object(te.a)({},e,{data:n,isAuth:!0,token:window.localStorage.token});case"USER:CHANGE_DATA":return Object(te.a)({},e,{userData:Object(te.a)({},e.userData,{fullname:n.fullname,email:n.email,bio:n.bio})});case"USER:SET_USER_DATA":return Object(te.a)({},e,{userData:n});case"USER:SET_AVATAR":return Object(te.a)({},e,{userData:Object(te.a)({},e.userData,{avatar:n})});case"USER:SET_IS_AUTH":return Object(te.a)({},e,{isAuth:n});default:return e}},attachments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ATTACHMENTS:SET_ITEMS":return Object(te.a)({},e,{items:n});case"ATTACHMENTS:REMOVE_ITEM":return Object(te.a)({},e,{items:e.items.filter((function(e){return e.uid!==n.uid}))});default:return e}}}),ht=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ot.d,pt=[ut.a],vt=Object(ot.e)(gt,ht(ot.a.apply(void 0,pt))),bt=Object(lt.a)({mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return st({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.props;vt.dispatch(q.fetchUserLogin(e)).then((function(e){"success"===e.status&&n.history.push("/")})).catch((function(){a(!1)}))},displayName:"LoginForm"})(ct),_t=function(e){var t=e.values,a=e.touched,n=e.errors,i=e.handleChange,c=e.handleBlur,s=e.handleSubmit,o=e.isValid,m=e.dirty;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",null,"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0447\u0430\u0442, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(g,null,r.a.createElement(l.a,{onSubmit:s,className:"login-form"},r.a.createElement(He,{name:"email",icon:"mail",placeholder:"E-Mail",handleChange:i,handleBlur:c,touched:a,errors:n,values:t}),r.a.createElement(He,{name:"fullname",icon:"user",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",handleChange:i,handleBlur:c,touched:a,errors:n,values:t}),r.a.createElement(He,{name:"password",icon:"lock",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",handleChange:i,handleBlur:c,touched:a,errors:n,values:t,type:"password"}),r.a.createElement(He,{name:"password2",icon:"lock",type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",handleChange:i,handleBlur:c,touched:a,errors:n,values:t}),r.a.createElement(He,{name:"bio",icon:"message",type:"text",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435",handleChange:i,handleBlur:c,touched:a,errors:n,values:t}),r.a.createElement(l.a.Item,null,m&&!o?r.a.createElement("span",null,"\u041e\u0448\u0438\u0431\u043a\u0430!"):"",r.a.createElement(E,{type:"primary",onClick:s,htmlType:"submit",size:"large",className:"login-form-button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement(u.b,{to:"/signIn",className:"auth__register-link"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")))))},St=a(77),Ot=a.n(St),yt=Object(lt.a)({mapPropsToValues:function(){return{email:"",fullname:"",password:"",password2:"",bio:""}},validate:function(e){var t={};return st({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(e,t){t.setSubmitting;var a=t.props;vt.dispatch(q.fetchUserRegister(e)).then((function(){a.history.push("/signin")})).catch((function(e){Ot()(e,"response.data.message.errmsg","").indexOf("dup")>=0?z({title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d.",type:"error",duration:5e3}):z({title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.",type:"error",duration:5e3})}))},displayName:"RegisterForm"})(_t),It=a(47),jt=a(546),At=function(e){var t=e.hash,a=e.verified;return t?a?{status:"success",title:"\u0413\u043e\u0442\u043e\u0432\u043e!",message:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d!"}:{status:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",message:"\u0412\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0438\u043b\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0445\u0435\u0448."}:{status:"info",title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 E-Mail."}},wt=function(e){var t=e.location,a=e.history,i=t.search.split("hash=")[1],c=Object(n.useState)(!1),l=Object(h.a)(c,2),s=l[0],o=l[1],u=Object(n.useState)(!!i),d=Object(h.a)(u,2),f=d[0],E=d[1],p=Object(n.useState)(At({hash:i,checking:f,verified:s})),v=Object(h.a)(p,2),b=v[0],_=v[1];return Object(n.useEffect)((function(){var e=function(e){var t=e.checking,a=e.verified;_(At({hash:i,checking:t,verified:a})),o(a),E(t)};i&&N(i).then((function(){e({verified:!0,checking:!1})})).catch((function(){e({verified:!1,checking:!1})}))}),[i]),r.a.createElement("div",{className:"verify-block"},r.a.createElement(g,null,f?r.a.createElement("div",{className:"verify-block__loading"},r.a.createElement(ye.a,{size:"large"})):r.a.createElement(jt.a,{status:b.status,title:b.title,subTitle:b.message,extra:"success"===b.status&&s&&r.a.createElement(m.a,{type:"primary",onClick:function(){return a.push("/signin")}},"\u0412\u043e\u0439\u0442\u0438")})))},Nt=function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(It.d,null,r.a.createElement(It.b,{exact:!0,path:["/","/signIn"],component:bt}),r.a.createElement(It.b,{exact:!0,path:"/signUp",component:yt}),r.a.createElement(It.b,{exact:!0,path:"/signUp/verify",component:wt}))))},Dt=(a(533),Object(It.g)(Object(K.b)((function(e){return e.dialogs}),L)((function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),i=a[0],c=a[1];return Object(n.useEffect)((function(){(0,e.setCurrentDialogId)(e.location.pathname.split("/").pop())}),[e]),Object(n.useEffect)((function(){window.addEventListener("click",(function(e){return"overlay"===e.target.className?c(!1):null}))}),[]),r.a.createElement("section",{className:"home"},i?r.a.createElement(se,{isVisiable:i,setIsVisiable:c}):null,r.a.createElement("div",{className:"chat"},r.a.createElement(le,null),r.a.createElement("div",{className:"chat__dialog"},r.a.createElement(ce,{setIsVisiable:c,isVisiable:i}),r.a.createElement(ee,{setIsVisiable:c,isVisiable:i}),r.a.createElement("div",{className:"chat__dialog-input"},r.a.createElement(ie,null)))))})))),kt=Object(K.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth;return r.a.createElement(r.a.Fragment,null,r.a.createElement(It.d,null,r.a.createElement(It.b,{exact:!0,path:["/signIn","/signUp","/signUp/verify"],component:Nt}),r.a.createElement(It.b,{path:"/",render:function(){return t?r.a.createElement(Dt,null):r.a.createElement(It.a,{to:"/signIn"})}})))}));a(534),a(535);vt.dispatch(q.fetchUserData()),c.a.render(r.a.createElement(K.a,{store:vt},r.a.createElement(u.a,null,r.a.createElement(kt,null))),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.1c035f0e.chunk.js.map