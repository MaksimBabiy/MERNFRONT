{"version":3,"sources":["assets/image/wave.svg","assets/image/play.svg","assets/image/pause.svg","assets/image/1231.svg","assets/image/noChecked.svg","components/Button/index.js","components/WhiteBlock/index.js","core/axios.js","utils/api/dialogs.js","utils/api/messages.js","utils/api/user.js","utils/api/file.js","core/socket.js","redux/actions/dialogs.js","redux/actions/messages.js","utils/helpers/openDialogs.js","utils/helpers/isAudio.js","utils/helpers/getMessageTime.js","redux/actions/user.js","redux/actions/attachments.js","containers/Dialogs.js","containers/Messages.js","containers/ChatInput.js","containers/Status.js","containers/SideBar.js","containers/Profile.js","containers/Avatar.js","containers/Edit.js","components/Message/index.js","utils/helpers/convertCurrentTime.js","components/Messages/index.js","components/DialogItem/index.js","components/Time/index.js","components/Readed/index.js","components/Dialogs/index.js","components/Avatar/index.js","utils/helpers/generateAvatarFromHash.js","components/Status/index.js","components/ChatInput/index.js","components/FormField/index.js","components/SideBar/index.js","components/UploadsFiles/index.js","components/Profile/index.js","components/Edit/index.js","modules/LoginForm/components/LoginForm.jsx","utils/validations.js","redux/reducers/dialogs.js","redux/reducers/messages.js","redux/reducers/user.js","redux/reducers/attachments.js","redux/reducers/index.js","redux/store.js","modules/LoginForm/index.js","modules/LoginForm/containers/LoginForm.js","modules/RegisterForm/components/RegisterForm.jsx","modules/RegisterForm/index.js","modules/RegisterForm/containers/RegisterForm.js","pages/Auth/conponents/CheckInfo.jsx","pages/Auth/index.jsx","pages/Home/index.jsx","App.js","index.js"],"names":["module","exports","Button","props","className","size","WhiteBlock","children","axios","defaults","baseURL","window","location","origin","headers","common","localStorage","token","get","partnerId","value","post","partner","text","_id","dialog","attachments","delete","obj","hash","name","data","url","fullname","email","bio","file","formData","FormData","append","socket","io","actions","setDialogs","items","type","payload","setStatus","bool","setCurrentDialogId","dispatch","emit","updateReadedStatus","userId","dialogId","updateUnreadedStatus","fetchDialogs","dialogsApi","then","setMessages","onRemoveMessage","messagesApi","catch","err","setIsLoading","addMessage","message","getState","dialogs","currentDialogId","pathname","split","fetchSendMessage","fetchMessages","title","duration","notification","description","length","ext","createdAt","isToday","format","setUserData","user","setIsAuth","setChangeData","setData","setAvatar","fetchUserData","userApi","response","status","fetchUserLogin","openDialogs","fetchUserRegister","getUserById","setUserAvatar","fileApi","avatar","setChangeInfo","info","setAttachments","removeAttachments","connect","dialogsActions","useState","inputValue","setValue","Array","from","filtred","setFiltredItems","onChangeInput","useCallback","filter","author","toLowerCase","indexOf","useEffect","onNewMessage","on","removeListener","forEach","item","friend","onSearch","messages","isLoading","messagesActions","isVisiable","setIsVisiable","previewImage","setPreviewImage","blockHeight","setBlockHeight","messageRef","useRef","current","scrollTo","blockRef","attachmentsActions","navigator","getUserMedia","mozGetUserMedia","msGetUserMedia","webkitGetUserMedia","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","emojiPickerVisible","setShowEmojiPicker","setLoading","onRecording","stream","recorder","MediaRecorder","start","onstart","onstop","ondataavailable","e","File","sendAudio","onError","console","log","handleOutsideClick","el","contains","target","audioId","sendMessage","stop","map","uid","document","querySelector","addEventListener","bind","removeEventListener","toggleEmojiPicker","addEmoji","colons","trim","handleSendMessage","keyCode","onSelectFiles","files","a","async","uploaded","i","Math","round","random","filename","onRecord","audio","onHideRecording","userActions","currentDialogObj","handleGetUserById","finally","online","isOnline","visible","setVisible","setInputValue","messageValue","setmessageValue","users","setUsers","Isloading","selectedUserId","setSelectedUserId","onClose","handleSearch","handleChangeMessage","handleChange","onShow","onAddDialog","onSelectUser","userData","isEdit","setIsEdit","isDoneAvatar","setIsDoneAvatar","uploadAvatar","noWay","modal","setModal","handleChangeInput","handleChangeData","Message","date","isMe","readed","isTyping","MessageAudio","audioSrc","audioElem","isPlaying","setIsPlaying","progress","setProgress","currentTime","setCurrentTime","ref","src","preload","style","width","onClick","pause","play","pauseSvg","alt","playSvg","waveSvg","number","mins","floor","secs","toFixed","convertCurrentTime","classnames","isAudio","isReaded","content","trigger","shape","icon","reactStringReplace","match","emoji","set","key","color","fontSize","renderAttachments","Messages","height","classNames","tip","index","footer","onCancel","DialogItem","lastMessage","to","getMessageTime","parseISO","renderLastMessage","unreaded","Time","distanceInWordsToNow","addSuffix","locale","ruLocale","Readed","checkedSvg","noChecked","Dialogs","Search","placeholder","onChange","orderBy","image","Empty","PRESENTED_IMAGE_SIMPLE","Avatar","handleOpenProfile","id","substr","char","charCodeAt","r","g","b","tinycolor","lighten","saturate","toHexString","colorLighten","generateAvatarFromHash","firstChar","toUpperCase","background","Status","btnVisiable","setBtnVisiable","onVisibleChange","aria-label","TextArea","Input","ChatInput","onSelect","emojiTag","onKeyUp","autoSize","minRows","maxRows","onFiles","containerProps","uploadProps","accept","multiple","htmlFor","FormField","touched","errors","values","handleBlur","Item","validateStatus","hasFeedback","help","prefix","onBlur","Option","Select","SideBar","options","onOk","disabled","loading","label","showSearch","defaultActiveFirstOption","showArrow","filterOption","notFoundContent","autosize","getBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","UploadsFiles","previewVisible","setPreviewVisible","fileList","setFileList","action","listType","onPreview","preview","originFileObj","onRemove","Profile","centered","LoadingOutlined","last_seen","FileImageFilled","ContactsFilled","MailOutlined","startsWith","rel","href","IdcardOutlined","HddOutlined","marginTop","marginBottom","zIndex","Edit","LoginForm","handleSubmit","onSubmit","password","htmlType","isAuth","rules","test","password2","Object","keys","initialState","combineReducers","state","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middleware","thunk","store","createStore","rootReducers","applyMiddleware","withFormik","mapPropsToValues","validate","validations","setSubmitting","history","push","displayName","RegisterForm","isValid","dirty","renderTextInfo","verified","CheckInfo","search","setVerified","checking","setChecking","setInfo","subTitle","extra","Auth","exact","path","component","withRouter","pop","render","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.1c035f0e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/wave.86c27fea.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.65f03140.svg\";","module.exports = __webpack_public_path__ + \"static/media/pause.a61933e8.svg\";","module.exports = __webpack_public_path__ + \"static/media/1231.a1d62491.svg\";","module.exports = __webpack_public_path__ + \"static/media/noChecked.5cab68c3.svg\";","import React from 'react';\r\nimport { Button as BaseButton } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nimport './button.scss'\r\nimport className from 'classnames'\r\n\r\nconst Button = (props) => (<BaseButton {...props} className={className('button',props.className, {'button--large' : props.size === 'large'})}/>\r\n)\r\nButton.propTypes = {\r\n    className: PropTypes.string\r\n} \r\n\r\nexport default Button;","import React from 'react';\r\nimport './whiteblock.scss'\r\n\r\n\r\nconst WhiteBlock = ({ children }) => {\r\n    return (\r\n        <div className=\"block\">{children}</div>\r\n    );\r\n}\r\n\r\nexport default WhiteBlock;","import axios from 'axios'\r\n\r\naxios.defaults.baseURL = window.location.origin;\r\naxios.defaults.headers.common['token'] = window.localStorage.token;\r\n\r\nwindow.axios = axios\r\nexport default axios","import { axios } from 'core';\r\n\r\nexport default {\r\n    getAll: () => axios.get(\"/dialogs\"),\r\n    create: (partnerId,value) => axios.post(\"/dialogs\",{partner:partnerId,text:value }),\r\n    delete: _id => axios.delete(`/dialog/${_id}`)\r\n}","import { axios } from 'core';\r\n\r\nexport default {\r\n    getAllByDialogId: _id => axios.get(\"/messages?dialog=\" + _id),\r\n    send: (text, dialog, attachments) => axios.post(\"/messages\", {\r\n        text,\r\n        dialog,\r\n        attachments\r\n    }),\r\n    removeById: _id => axios.delete(\"/messages?id=\" + _id)\r\n}","import { axios } from 'core';\r\n\r\nexport default {\r\n    signIn: obj => axios.post(\"/user/signin\", obj), \r\n    signUp: obj => axios.post('/user/signup', obj),\r\n    getMe: () => axios.get(\"/user/me\"),\r\n    verify: hash => axios.get(`/user/verify?hash=${hash}`),\r\n    findUsers: name => axios.get(`/user/find?query=${name}`),\r\n    getUserDataById: _id => axios.get(`/user/${_id}`),\r\n    uploadAvatar: (_id, data) => axios.post(`/user/avatar/${_id}`,{url: data}),\r\n    editData: (_id,data) => axios.post(`/user/edit/${_id}`,{fullname: data.fullname, email: data.email, bio: data.bio})\r\n}","import { axios } from 'core';\r\n\r\nexport default {\r\n    upload: file => {\r\n        const formData = new FormData();\r\n        formData.append(\"file\",file);\r\n       return axios.post('/files', formData, {\r\n            headers: {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n               \r\n            }\r\n        })\r\n    }\r\n}","import io from 'socket.io-client'\r\n\r\nconst socket = io(window.location.origin)\r\n\r\nexport default socket","import { dialogsApi } from 'utils/api'\r\nimport socket from 'core/socket';\r\nconst actions = {\r\n    setDialogs: items => ({\r\n        type: 'DIALOGS:SET_ITEMS',\r\n        payload: items\r\n    }),\r\n    setStatus: bool => ({\r\n        type: 'DIALOGS:CHANGE_MESSAGE',\r\n        payload: bool\r\n    }),\r\n    setCurrentDialogId: _id => dispatch => {\r\n        socket.emit('DIALOGS:JOIN', _id);\r\n        dispatch({\r\n            type:'DIALOGS:SET_CURRENT_DIALOG_ID',\r\n            payload: _id,\r\n        })\r\n    },\r\n    updateReadedStatus: ({userId, dialogId}) => ({\r\n        type: 'DIALOGS:LAST_MESSAGE_READED_STATUS',\r\n        payload: {\r\n            userId,\r\n            dialogId,\r\n          },\r\n    }),\r\n    updateUnreadedStatus: (_id) => ({\r\n        type: 'DIALOGS:SET_UNREADED',\r\n        payload: _id\r\n    })\r\n    ,\r\n    fetchDialogs: userId => dispatch => {\r\n        dialogsApi.getAll().then(({data}) => {   \r\n         dispatch(actions.setDialogs(data))\r\n         dispatch(actions.updateUnreadedStatus(userId))\r\n        })\r\n    },\r\n    \r\n}\r\n\r\nexport default actions","import { messagesApi } from 'utils/api'\r\n\r\nconst actions = {\r\n    setMessages: items => ({\r\n        type: 'MESSAGES:SET_ITEMS',\r\n        payload: items\r\n    }),\r\n    onRemoveMessage: _id => dispatch => {\r\n      dispatch({\r\n        type: 'MESSAGES:REMOVE_MESSAGE',\r\n        payload: _id\r\n      })\r\n      messagesApi\r\n      .removeById(_id)\r\n      .catch( err => {\r\n        dispatch(actions.setIsLoading(false))\r\n      })\r\n    },\r\n    addMessage: message => (dispatch, getState) => {\r\n        const { dialogs } = getState();\r\n        const { currentDialogId } = dialogs\r\n        if (currentDialogId === window.location.pathname.split('dialog/')[1]) {\r\n          dispatch({\r\n            type: \"MESSAGES:ADD_MESSAGE\",\r\n            payload: message\r\n          });\r\n        }\r\n      },\r\n      fetchSendMessage: ({ text, dialogId, attachments }) => dispatch => {\r\n        return messagesApi.send(text, dialogId, attachments);\r\n      },\r\n    setIsLoading: bool => ({\r\n        type: 'MESSAGES:SET_IS_LOADING',\r\n        payload: bool\r\n    }),\r\n    fetchMessages: dialogId => dispatch => {\r\n        dispatch(actions.setIsLoading(true))\r\n        messagesApi\r\n            .getAllByDialogId(dialogId)\r\n            .then(({data}) => {       \r\n            dispatch(actions.setMessages(data))\r\n        }).catch(() => {\r\n        dispatch(actions.setIsLoading(false))\r\n        })\r\n    }\r\n}\r\n\r\nexport default actions","import { notification } from 'antd';\r\n\r\nexport default ({text,type = \"info\", title, duration = 3}) => {\r\n    notification[type]({\r\n        message: title,\r\n        description: text,\r\n        duration: duration\r\n    })\r\n}","export default  (attachments) => {\r\n  if(!attachments) return null\r\n    const file = attachments[0]\r\n    return attachments.length &&  file.ext === \"webm\"\r\n  }","import format from 'date-fns/format'\r\nimport isToday from 'date-fns/isToday'\r\n\r\nexport default createdAt => {\r\n    if (isToday(createdAt)) {\r\n        return format(createdAt, 'HH:mm');\r\n      } else {\r\n        return format(createdAt, 'dd/mm/yyyy');\r\n      }\r\n};","import { userApi,fileApi } from 'utils/api'\r\nimport { openDialogs } from 'utils/helpers'\r\nconst actions = {\r\n    setUserData: user => ({\r\n        type: 'USER:SET_DATA',\r\n        payload: user\r\n    }),\r\n    setIsAuth: bool => ({\r\n      type: 'USER:SET_IS_AUTH',\r\n      payload: bool\r\n  }),\r\n    setChangeData: user => ({\r\n      type: 'USER:CHANGE_DATA',\r\n      payload: user\r\n    })\r\n    ,\r\n    setData: user => ({\r\n      type: 'USER:SET_USER_DATA',\r\n      payload: user\r\n    }),\r\n    setAvatar: url => ({\r\n      type: 'USER:SET_AVATAR',\r\n      payload: url\r\n    }),\r\n    fetchUserData: () => dispatch => {\r\n        userApi.getMe()\r\n        .then(({data}) => {\r\n            dispatch(actions.setUserData(data))\r\n        })\r\n        .catch( err => {\r\n          if(err.response.status === 403) {\r\n            dispatch(actions.setIsAuth(false))\r\n            delete window.localStorage.token\r\n          }\r\n        })\r\n    },\r\n    fetchUserLogin: obj => dispatch => {\r\n        return userApi.signIn(obj)\r\n        .then(({data}) => {\r\n            const {status, token} = data;\r\n            if(status === \"error\"){\r\n                openDialogs({\r\n                  title: \"Ошибка при авторизации\",\r\n                  text: \"Неверный логин или пароль\", \r\n                  type: \"error\"\r\n                })\r\n              }\r\n              else {\r\n                openDialogs({\r\n                  text: \"Отлично!\",\r\n                  title: \"Авторизация успешна!\",\r\n                  type: \"success\"\r\n                })\r\n              dispatch(actions.setUserData(data))\r\n              window.axios.defaults.headers.common[\"token\"] = token;\r\n              window.localStorage[\"token\"] = token\r\n              dispatch(actions.fetchUserData())\r\n              dispatch(actions.setIsAuth(true))\r\n            }\r\n            return data\r\n        });\r\n    },\r\n    fetchUserRegister: obj => dispatch =>{\r\n      return userApi.signUp(obj);\r\n  }, \r\n    getUserById: _id => dispatch => {\r\n       return userApi.getUserDataById(_id).then( ({data}) => {\r\n         dispatch(actions.setData(data))\r\n       })\r\n    },\r\n    setUserAvatar: (file,_id) => dispatch => {\r\n      return fileApi.upload(file)\r\n      .then(({data}) => userApi.uploadAvatar(_id, data.file.url))\r\n      .then(({data})=> dispatch(actions.setAvatar(data.file.avatar)))\r\n    },\r\n    setChangeInfo: (_id,data) => dispatch => {\r\n      return userApi.editData(_id,data).then(({data}) => dispatch(actions.setChangeData(data.info)))\r\n    } \r\n   \r\n}\r\n\r\nexport default actions","const actions = {\r\n    setAttachments: items => ({\r\n      type: \"ATTACHMENTS:SET_ITEMS\",\r\n      payload: items\r\n    }),\r\n    removeAttachments: file => ({\r\n      type: \"ATTACHMENTS:REMOVE_ITEM\",\r\n      payload: file\r\n    })\r\n  };\r\n  \r\n  export default actions;","import React, {useState, useEffect,useCallback} from 'react';\r\nimport { Dialogs as BaseDialogs } from 'components'\r\nimport { dialogsActions } from 'redux/actions'\r\nimport { connect } from 'react-redux'\r\nimport socket from 'core/socket'\r\n\r\nconst Dialogs = (props) => {\r\n\r\n   const { items,fetchDialogs,setCurrentDialogId,currentDialogId,userId,updateReadedStatus } = props\r\n    const [inputValue ,setValue] = useState(\"\");\r\n    const [filtred, setFiltredItems] = useState(Array.from(items));\r\n \r\n    const onChangeInput = useCallback((value=\"\") => {\r\n        setFiltredItems(\r\n            items.filter(\r\n                dialog =>\r\n                dialog.author.fullname.toLowerCase().indexOf(value.toLowerCase()) >= 0 ||\r\n                dialog.partner.fullname.toLowerCase().indexOf(value.toLowerCase()) >= 0 \r\n            )\r\n        );\r\n        setValue(value)\r\n    },[items])\r\n\r\n   \r\n   \r\n    useEffect(() => {\r\n      setCurrentDialogId(window.location.pathname.split('dialog/')[1])\r\n    },[items,setCurrentDialogId])\r\n\r\n    useEffect(() => {\r\n        if (items.length) {\r\n          onChangeInput();\r\n        }\r\n      }, [items,onChangeInput]);\r\n\r\n    useEffect(() => {\r\n\r\n    const onNewMessage = () => {\r\n        fetchDialogs(userId)\r\n    }\r\n\r\n    fetchDialogs(userId)\r\n    socket.on('SERVER:DIALOG_CREATED', onNewMessage);\r\n    socket.on('SERVER:NEW_MESSAGE', onNewMessage);\r\n    socket.on('SERVER:MESSAGES_READED', updateReadedStatus);\r\n    return ( ) => {\r\n        socket.removeListener(\"SERVER:DIALOG_CREATED\", onNewMessage);\r\n        socket.removeListener(\"SERVER:NEW_MESSAGE\", onNewMessage);\r\n    };\r\n    },[fetchDialogs,updateReadedStatus,userId])\r\n    \r\n    filtred.forEach(item => {\r\n        item.author._id === userId ? item.friend = item.partner : item.friend = item.author\r\n    })\r\n    return (\r\n        <BaseDialogs \r\n        userId={userId}\r\n        items={filtred}\r\n        onSearch={onChangeInput}\r\n        inputValue={inputValue}\r\n        currentDialogId={currentDialogId}\r\n        \r\n        />\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default connect(({dialogs}) => {\r\n   return dialogs\r\n},dialogsActions)(Dialogs)","import React, {useEffect,useRef,useState} from 'react';\r\nimport { Messages as BaseMessages } from 'components'\r\nimport { messagesActions } from 'redux/actions'\r\nimport { connect } from 'react-redux'\r\nimport socket from 'core/socket'\r\nimport {Empty } from 'antd'\r\n\r\nconst Dialogs = ({\r\n    isLoading,\r\n    currentDialogId, \r\n    fetchMessages, \r\n    items,\r\n    addMessage,\r\n    user,\r\n    onRemoveMessage,\r\n    attachments,\r\n    isVisiable,\r\n    setIsVisiable,\r\n  \r\n}) => {\r\n\r\n  const [previewImage, setPreviewImage] = useState(null)\r\n  const [blockHeight, setBlockHeight] = useState(135);\r\n \r\n\r\n    const messageRef = useRef(null)\r\n    \r\n    useEffect(() => {\r\n      if (attachments.length) {\r\n        setBlockHeight(245);\r\n      } else {\r\n        setBlockHeight(135);\r\n      }\r\n    }, [attachments]); \r\n\r\n    useEffect( () => {\r\n      socket.on()\r\n    },[])\r\n    \r\n    useEffect(() => {\r\n      const onNewMessage = (data) => {\r\n        addMessage(data)\r\n     }\r\n\r\n        if (currentDialogId) {\r\n          fetchMessages(currentDialogId);\r\n        }\r\n        socket.on('SERVER:NEW_MESSAGE', onNewMessage);\r\n       \r\n        return () => socket.removeListener('SERVER:NEW_MESSAGE', onNewMessage);\r\n      }, [currentDialogId,fetchMessages,addMessage]);\r\n    \r\n \r\n    useEffect( () => {\r\n      if(messageRef.current){\r\n          messageRef.current.scrollTo(0,9999);\r\n      }\r\n    },[items])\r\n    \r\n      if(currentDialogId === ''){\r\n          return  <Empty description=\"Откройте диалог\"/>\r\n      }\r\n    return ( \r\n        <BaseMessages \r\n        isVisiable={isVisiable}\r\n        setIsVisiable={setIsVisiable}\r\n        items={items} \r\n        isLoading={isLoading} \r\n        user={user} \r\n        blockHeight={blockHeight}\r\n        blockRef={messageRef}\r\n        onRemoveMessage={onRemoveMessage}\r\n        setPreviewImage={setPreviewImage}\r\n        previewImage={previewImage}\r\n        />\r\n    )\r\n}\r\n\r\n\r\nexport default connect(\r\n    ({messages,dialogs,user,attachments})=> ({\r\n    currentDialogId: dialogs.currentDialogId ,\r\n    items: messages.items,\r\n    attachments: attachments.items,\r\n    isLoading: messages.isLoading,\r\n    user: user.data\r\n}),messagesActions)(Dialogs)","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fileApi } from 'utils/api';\r\nimport socket from 'core/socket';\r\n\r\nimport { ChatInput as ChatInputBase } from 'components';\r\n\r\nimport { messagesActions,attachmentsActions } from 'redux/actions';\r\n\r\nconst ChatInput = props => {\r\n  const {\r\n    dialogs: { currentDialogId },\r\n    attachments,\r\n    fetchSendMessage,\r\n    setAttachments,\r\n    removeAttachments,\r\n    user,\r\n  } = props;\r\n  // if (!currentDialogId) {\r\n  //   return null;\r\n  // }\r\n\r\n  window.navigator.getUserMedia =\r\n    window.navigator.getUserMedia ||\r\n    window.navigator.mozGetUserMedia ||\r\n    window.navigator.msGetUserMedia ||\r\n    window.navigator.webkitGetUserMedia;\r\n\r\n  const [value, setValue] = useState('');\r\n  const [isRecording, setIsRecording] = useState('');\r\n  const [mediaRecorder, setMediaRecorder] = useState(null);\r\n  const [emojiPickerVisible, setShowEmojiPicker] = useState(false);\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const toggleEmojiPicker = () => {\r\n    setShowEmojiPicker(!emojiPickerVisible);\r\n  };\r\n\r\n  const onRecord = () => {\r\n    if (navigator.getUserMedia) {\r\n      navigator.getUserMedia({ audio: true }, onRecording, onError);\r\n    }\r\n  };\r\n\r\n  const onRecording = stream => {\r\n    const recorder = new MediaRecorder(stream);\r\n    setMediaRecorder(recorder);\r\n\r\n    recorder.start();\r\n\r\n    recorder.onstart = () => {\r\n      setIsRecording(true);\r\n    };\r\n\r\n    recorder.onstop = () => {\r\n      setIsRecording(false);\r\n    };\r\n\r\n    recorder.ondataavailable = e => {\r\n      const file = new File([e.data], 'audio.webm');\r\n      setLoading(true);\r\n      fileApi.upload(file).then(({ data }) => {\r\n        sendAudio(data.file._id).then(() => {\r\n          setLoading(false);\r\n        });\r\n      });\r\n    };\r\n  };\r\n\r\n  const onError = err => {\r\n    console.log('The following error occured: ' + err);\r\n  };\r\n\r\n  const handleOutsideClick = (el, e) => {\r\n    if (el && !el.contains(e.target)) {\r\n      setShowEmojiPicker(false);\r\n    }\r\n  };\r\n\r\n  const addEmoji = ({ colons }) => {\r\n    setValue((value + ' ' + colons).trim());\r\n  };\r\n\r\n  const sendAudio = audioId => {\r\n    return fetchSendMessage({\r\n      text: null,\r\n      dialogId: currentDialogId,\r\n      attachments: [audioId],\r\n    });\r\n  };\r\n\r\n  const sendMessage = () => {\r\n    if (isRecording) {\r\n      mediaRecorder.stop();\r\n    } else if (value || attachments.length) {\r\n      fetchSendMessage({\r\n        text: value,\r\n        dialogId: currentDialogId,\r\n        attachments: attachments.map(file => file.uid),\r\n      });\r\n      setValue('');\r\n      setAttachments([]);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = e => {\r\n    socket.emit('DIALOGS:TYPING', { dialogId: currentDialogId, user });\r\n    if (e.keyCode === 13) {\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const onHideRecording = () => {\r\n    setIsRecording(false);\r\n  };\r\n\r\n  const onSelectFiles = async files => {\r\n    let uploaded = [];\r\n    for (let i = 0; i < files.length; i++) {\r\n      const file = files[i];\r\n      const uid = Math.round(Math.random() * 1000);\r\n      uploaded = [\r\n        ...uploaded,\r\n        {\r\n          uid,\r\n          name: file.name,\r\n          status: 'uploading',\r\n        },\r\n      ];\r\n      setAttachments(uploaded);\r\n      // eslint-disable-next-line no-loop-func\r\n      await fileApi.upload(file).then(({ data }) => {\r\n        uploaded = uploaded.map(item => {\r\n          if (item.uid === uid) {\r\n            return {\r\n              status: 'done',\r\n              uid: data.file._id,\r\n              name: data.file.filename,\r\n              url: data.file.url,\r\n            };\r\n          }\r\n          return item;\r\n        });\r\n      });\r\n    }\r\n    setAttachments(uploaded);\r\n  };\r\n \r\n  useEffect(() => {\r\n    const el = document.querySelector('.chat-input__smile-btn');\r\n    document.addEventListener('click', handleOutsideClick.bind(this, el));\r\n    return () => {\r\n      document.removeEventListener('click', handleOutsideClick.bind(this, el));\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <ChatInputBase\r\n      value={value}\r\n      setValue={setValue}\r\n      emojiPickerVisible={emojiPickerVisible}\r\n      toggleEmojiPicker={toggleEmojiPicker}\r\n      addEmoji={addEmoji}\r\n      handleSendMessage={handleSendMessage}\r\n      sendMessage={sendMessage}\r\n      onSelectFiles={onSelectFiles}\r\n      attachments={attachments}\r\n      isRecording={isRecording}\r\n      onRecord={onRecord}\r\n      onHideRecording={onHideRecording}\r\n      isLoading={isLoading}\r\n      removeAttachments={removeAttachments}\r\n    />\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  ({ dialogs, attachments, user }) => ({\r\n    dialogs,\r\n    attachments: attachments.items,\r\n    user: user.data,\r\n  }),\r\n  { ...messagesActions, ...attachmentsActions },\r\n)(ChatInput);","import React from \"react\";\r\nimport { Status as StatusBase } from \"components\";\r\nimport { connect } from \"react-redux\";\r\nimport { userActions,dialogsActions } from 'redux/actions'\r\n\r\nconst Status = (props) => {\r\n  const { currentDialogId, user, dialogs,setIsVisiable,isVisiable,getUserById, } = props\r\n  if (!dialogs.length || !currentDialogId) {\r\n    return null;\r\n  }\r\n  \r\n  const currentDialogObj = dialogs.filter(\r\n    dialog => dialog._id === currentDialogId\r\n  )[0];\r\n\r\n  let partner = {};\r\n  if(currentDialogObj) {\r\n    if (currentDialogObj.author._id === user._id) {\r\n      partner = currentDialogObj.partner;\r\n    } else {\r\n      partner = currentDialogObj.author;\r\n    }\r\n  }\r\n  \r\n  const handleGetUserById = (_id) => {\r\n    getUserById(_id).finally(() => setIsVisiable(!isVisiable))\r\n  }\r\n  \r\n\r\n  return <StatusBase  handleGetUserById={handleGetUserById} online={partner.isOnline} fullname={partner.fullname} setIsVisiable={setIsVisiable} isVisiable={isVisiable} user={user}/>;\r\n};\r\n\r\nexport default connect(({ dialogs, user }) => ({\r\n  dialogs: dialogs.items,\r\n  currentDialogId: dialogs.currentDialogId,\r\n  user: user.data,\r\n}),{...userActions,...dialogsActions})(Status);","import React,{useState} from 'react';\r\nimport { SideBar as BaseSideBar } from 'components'\r\nimport { connect } from 'react-redux'\r\nimport { userApi, dialogsApi } from 'utils/api'\r\n\r\nconst SideBar = ({user}) => {\r\n    const [visible, setVisible] = useState(false)\r\n    const [inputValue, setInputValue] = useState('')\r\n    const [messageValue, setmessageValue] = useState('')\r\n    const [users, setUsers] = useState([])\r\n    const [Isloading, setIsLoading] = useState(false)\r\n    const [selectedUserId, setSelectedUserId] = useState(false)\r\n\r\n    const onClose = () => {\r\n        setVisible(false)\r\n    }\r\n    const onShow = () => {\r\n        setVisible(true)\r\n    }\r\n    const handleChange = (value) => {\r\n        setInputValue(value)\r\n    }\r\n    const handleChangeMessage = (e) => {\r\n        setmessageValue(e.target.value)\r\n    }\r\n    const handleSearch = (value) => {\r\n        setIsLoading(true);\r\n    userApi\r\n      .findUsers(value)\r\n      .then(({ data }) => {\r\n        setUsers(data);\r\n        setIsLoading(false);\r\n      })\r\n      .catch(() => {\r\n        setIsLoading(false);\r\n      });\r\n    }\r\n    const onSelectUser = userId => {\r\n        setSelectedUserId(userId)\r\n    }\r\n    const addDialog = () => {\r\n       dialogsApi\r\n      .create(selectedUserId,messageValue)\r\n      .then(({ data }) => {\r\n        \r\n       onClose()\r\n      })\r\n      .catch((err) => {\r\n      \r\n      });\r\n    }\r\n\r\n    return <BaseSideBar \r\n    user={user} \r\n    users={users} \r\n    messageValue={messageValue}\r\n    inputValue={inputValue} \r\n    handleSearch={handleSearch} \r\n    handleChangeMessage={handleChangeMessage}\r\n    handleChange={handleChange} \r\n    onClose={onClose} \r\n    selectedUserId={selectedUserId}\r\n    onShow={onShow} \r\n    visible={visible}\r\n    Isloading={Isloading}\r\n    onAddDialog={addDialog}\r\n    onSelectUser={onSelectUser}\r\n    />\r\n}\r\nexport default connect( ({user,dialogs})  => ({user: user.data}))(SideBar);    ","import React, {useState} from 'react';\r\nimport { Profile as BaseProfile } from 'components'\r\nimport { userActions } from 'redux/actions'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst Profile = (props) => {\r\n    const { userData,userId,setUserAvatar,dialogs,isVisiable,setIsVisiable } = props\r\n    const [isEdit, setIsEdit] = useState(false)\r\n    const [isDoneAvatar, setIsDoneAvatar] = useState(false)\r\n    const [previewImage, setPreviewImage] = useState(null)\r\n        const uploadAvatar = (file) => {\r\n            if(userData) {\r\n                setUserAvatar(file,userData._id).finally(() => setIsDoneAvatar(false))\r\n            }\r\n        }\r\n    return (\r\n        <BaseProfile\r\n        isDoneAvatar={isDoneAvatar}\r\n        setIsDoneAvatar={setIsDoneAvatar}\r\n        userData={userData}\r\n        uploadAvatar={uploadAvatar}\r\n        userId={userId}\r\n        isEdit={isEdit}\r\n        isVisiable={isVisiable}\r\n        setIsVisiable={setIsVisiable}\r\n        setIsEdit={setIsEdit}\r\n        setPreviewImage={setPreviewImage}\r\n        previewImage={previewImage}\r\n        currentDialogId={dialogs}\r\n        />\r\n    )\r\n}\r\nexport default connect(({user,dialogs}) => ({\r\n    userData: user.userData,\r\n    dialogs: dialogs.currentDialogId,\r\n    userId: user.data._id\r\n}),userActions)(Profile)","import React from 'react';\r\nimport { Avatar as BaseAvatar } from 'components'\r\nimport { userActions } from 'redux/actions'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst Avatar = ({getUserById,isVisiable,setIsVisiable,user,noWay,}) => {\r\n    \r\n    const handleGetUserById = (_id) => {\r\n        getUserById(_id).finally(() => setIsVisiable(!isVisiable))\r\n       }\r\n\r\n    return (\r\n        <BaseAvatar \r\n        isVisiable={isVisiable}\r\n        setIsVisiable={setIsVisiable}\r\n        handleGetUserById={handleGetUserById}\r\n        user={user}\r\n        noWay={noWay}\r\n        />\r\n    )\r\n}\r\n\r\nexport default connect(({dialogs}) => {\r\n   return dialogs\r\n},userActions)(Avatar)","import React, {useState} from 'react';\r\nimport { Edit as BaseEdit } from 'components'\r\nimport { userActions } from 'redux/actions'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst Edit = (props) => {\r\n    const { setChangeInfo,data,modal ,setModal} = props\r\n    const [ value,setValue ] = useState({\r\n        fullname: data.fullname,\r\n        email: data.email,\r\n        bio: data.bio\r\n    })\r\n    const handleChangeInput = (e) => {\r\n        setValue({\r\n            ...value,\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n   \r\n    const handleChangeData = () => {\r\n        return (\r\n        value.fullname === '' ? value.fullname = data.fullname : value.fullname,\r\n        value.email === '' ? value.email = data.email : value.email,\r\n        value.bio === '' ? value.bio = data.bio : value.bio,\r\n        setChangeInfo(data._id, value)\r\n        )\r\n    }\r\n    return (\r\n        <BaseEdit \r\n        value={value}\r\n        modal={modal}\r\n        setModal={setModal}\r\n        handleChangeInput={handleChangeInput}\r\n        handleChangeData={handleChangeData}\r\n        />\r\n    )\r\n}\r\nexport default connect(({user}) => {\r\n   return user\r\n},userActions)(Edit)","import React,{useState,useRef, useEffect} from 'react';\r\nimport './message.scss'\r\nimport classnames from 'classnames'\r\nimport { Time,Readed } from 'components'\r\nimport { Avatar } from 'containers'\r\nimport { Popover, Button, Icon } from 'antd';\r\nimport waveSvg from 'assets/image/wave.svg';\r\nimport playSvg from 'assets/image/play.svg';\r\nimport pauseSvg from 'assets/image/pause.svg'\r\nimport { convertCurrentTime, isAudio} from 'utils/helpers'\r\nimport reactStringReplace from 'react-string-replace'\r\nimport { Emoji } from 'emoji-mart';\r\n\r\nconst Message = ({ \r\n    text,\r\n    date,\r\n    user,\r\n    isMe,\r\n    readed,\r\n    attachments,\r\n    isTyping, \r\n    audio,\r\n    onRemoveMessage,\r\n    setPreviewImage,\r\n    isVisiable,\r\n    setIsVisiable\r\n}) => {\r\n\r\n const renderAttachments = (item) => {\r\n   if(item.ext !== 'webm') {\r\n     return  <div onClick={() => setPreviewImage(item.url)} key={item._id} className=\"message__attachments-item\">\r\n     <div className=\"message__attachments-item-overlay\" >\r\n       <Icon type=\"eye\" style={{color: 'white', fontSize: '18px'}}/>\r\n     </div>\r\n       <img src={item.url} alt=\"123\" />\r\n   </div>\r\n   }\r\n   else {\r\n     return <MessageAudio audioSrc={item.url} key={item._id}/>\r\n   }\r\n }\r\n\r\n \r\n    const MessageAudio = ({ audioSrc }) => {\r\n        const audioElem = useRef(null);\r\n        const [isPlaying, setIsPlaying] = useState(false);\r\n        const [progress, setProgress] = useState(0);\r\n        const [currentTime, setCurrentTime] = useState(0);\r\n      \r\n        const togglePlay = () => {\r\n          if (!isPlaying) {\r\n            audioElem.current.play();\r\n          } else {\r\n            audioElem.current.pause();\r\n          }\r\n        };\r\n      \r\n        useEffect(() => {\r\n          audioElem.current.addEventListener(\r\n            'playing',\r\n            () => {\r\n              setIsPlaying(true);\r\n            },\r\n            false,\r\n          );\r\n          audioElem.current.addEventListener(\r\n            'ended',\r\n            () => {\r\n              setIsPlaying(false);\r\n              setProgress(0);\r\n              setCurrentTime(0);\r\n            },\r\n            false,\r\n          );\r\n          audioElem.current.addEventListener(\r\n            'pause',\r\n            () => {\r\n              setIsPlaying(false);\r\n            },\r\n            false,\r\n          );\r\n          audioElem.current.addEventListener('timeupdate', () => {\r\n            const duration = (audioElem.current && audioElem.current.duration) || 0;\r\n            setCurrentTime(audioElem.current.currentTime);\r\n            setProgress((audioElem.current.currentTime / duration) * 100);\r\n          });\r\n        }, []);\r\n        return (\r\n            <div className=\"message__audio\">\r\n              <audio ref={audioElem} src={audioSrc} preload=\"auto\" />\r\n              <div className=\"message__audio-progress\" style={{ width: progress + '%' }} />\r\n              <div className=\"message__audio-info\">\r\n                <div className=\"message__audio-btn\">\r\n                  <button onClick={togglePlay}>\r\n                    {isPlaying ? (\r\n                      <img src={pauseSvg} alt=\"Pause svg\" />\r\n                    ) : (\r\n                      <img src={playSvg} alt=\"Play svg\" />\r\n                    )}\r\n                  </button>\r\n                </div>\r\n                <div className=\"message__audio-wave\">\r\n                  <img src={waveSvg} alt=\"Wave svg\" />\r\n                </div>\r\n                <span className=\"message__audio-duration\">{convertCurrentTime(currentTime)}</span>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n      \r\n    return (\r\n        <div className={classnames(\r\n         'message', {'message--isme': isMe,\r\n         'message--is-typing' : isTyping,\r\n         'message--image': isAudio(attachments) && attachments && attachments.length  === 1 && !text,\r\n         \"message--is-audio\": isAudio(attachments),\r\n         })}>\r\n            <div className=\"message__content\">\r\n             { (<Readed isMe={isMe} isReaded={readed}/>) }\r\n            { isMe && <Popover content={\r\n            <div>\r\n              <Button onClick={onRemoveMessage}>Удалить сообщение</Button>\r\n            </div>\r\n            }\r\n            trigger=\"click\">\r\n              <div className=\"message__icon-actions\">\r\n            <Button type=\"link\" shape=\"circle\" icon=\"ellipsis\" />\r\n              </div>\r\n            </Popover>}\r\n            <div className=\"message__avatar\">\r\n                <Avatar user={user} setIsVisiable={setIsVisiable} isVisiable={isVisiable} noWay={true}/>\r\n            </div>\r\n            <div className=\"message__info\">\r\n              <div className=\"message__user\">\r\n                {user.fullname}\r\n              </div>\r\n                {(text || isTyping) && \r\n                <div className=\"message__bubble\">\r\n                    {text && \r\n                    <p className=\"message__text\">\r\n                      {reactStringReplace(text,/:(.+?):/g, (match, i) => (\r\n                      <Emoji emoji={match} set=\"apple\" size={24} key={i} className=\"smile\"/>\r\n                    ))}\r\n                    </p>\r\n                    }\r\n                   {isTyping &&  <div className=\"message__typing\">\r\n                         <span />\r\n                         <span />\r\n                         <span />\r\n                    </div>}\r\n                </div>}\r\n                {audio && <MessageAudio audioSrc={audio}/>}\r\n                    {attachments &&  \r\n                    (<div className=\"message__attachments\">\r\n                        {attachments.map((item) =>  renderAttachments(item))} \r\n                    </div>\r\n                    )}\r\n                    { date && <span className=\"message__date\">\r\n                        <Time date={date}/>    \r\n                    </span>}\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","\r\nexport default number => {\r\n  const mins = Math.floor(number / 60);\r\n  const secs = (number % 60).toFixed();\r\n  return `${mins < 10 ? \"0\" : \"\"}${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`;\r\n};","import React from 'react';\r\nimport {Empty, Spin, Modal } from 'antd'\r\nimport { Message } from 'components'\r\nimport classNames from 'classnames'\r\nimport './messages.scss'\r\n\r\n\r\nconst Messages = ({\r\n  blockRef,\r\n  isLoading,\r\n  items, \r\n  user,\r\n  onRemoveMessage, \r\n  blockHeight,\r\n  previewImage,\r\n  setPreviewImage,\r\n  setIsVisiable,\r\n  isVisiable\r\n}) => {\r\n  \r\n   return (\r\n    <div className=\"chat__dialog-messages\" style={{ height: `calc(100% - ${blockHeight}px)` }}>\r\n     <div \r\n     ref={blockRef} \r\n     className={classNames('messages', {\"messages--loading\" : isLoading})}\r\n    >\r\n        {isLoading  ? (\r\n          <Spin tip=\"Loading...\" size=\"large\">\r\n          \r\n        </Spin>\r\n        ) : \r\n        items && items.length ? (\r\n        items.map((item,index) => (\r\n          <Message \r\n          isVisiable={isVisiable}\r\n          setIsVisiable={setIsVisiable}\r\n          key={index}\r\n          {...item}\r\n          onRemoveMessage={onRemoveMessage.bind(this, item._id)}\r\n          setPreviewImage={setPreviewImage}\r\n          isMe={user._id === item.user._id}\r\n           /> ))\r\n          ) : \r\n          (\r\n            <Empty description=\"Откройте диалог\"/>\r\n          )}\r\n           <Modal\r\n           width=\"600px\"\r\n           visible={!!previewImage}\r\n           footer={null}\r\n           onCancel={() => setPreviewImage(null)}\r\n            >\r\n          <img src={previewImage} style={{width: '100%'}} alt=\"prewiew\"/>\r\n          </Modal>\r\n     </div>\r\n     </div>\r\n   )\r\n}\r\n\r\nexport default Messages;","import React from 'react';\r\nimport '../Dialogs/dialogs.scss'\r\nimport { getMessageTime } from 'utils/helpers'\r\nimport {  Readed,Avatar } from 'components'\r\nimport classnames from 'classnames'\r\nimport parseISO from 'date-fns/parseISO'\r\nimport { Link } from 'react-router-dom'\r\nimport reactStringReplace from 'react-string-replace'\r\nimport { Emoji } from 'emoji-mart';\r\n\r\nconst renderLastMessage = (message,userId ) => {\r\n    if(message.text === null) {\r\n        return message.user._id === userId ? `You: Voice message` : 'Voice message'\r\n    }\r\n    else if (message.text === '' && message.attachments){\r\n        return message.user._id === userId ? `You: attachments` : `attachments`\r\n    }\r\n  \r\n    else {\r\n    return message.user._id === userId ? `You: ` + message.text && reactStringReplace(message.text, /:(.+?):/g, (match,i) => ( <Emoji emoji={match} set=\"apple\" size={24} key={i}/>)) : message.text && reactStringReplace(message.text, /:(.+?):/g, (match,i) => ( <Emoji emoji={match} set=\"apple\" size={24} key={i}/>))\r\n    }\r\n}\r\nconst DialogItem = (props) => {\r\n   let { _id,isMe,currentDialogId,lastMessage,userId,partner,friend} = props\r\n   currentDialogId = window.location.pathname.split('dialog/')[1]\r\n   console.log(lastMessage);\r\n    return(\r\n        <Link to={`/dialog/${_id}`}>\r\n        <div className={classnames(\"dialogs__item\", {\r\n        'dialogs__item--online': partner.isOnline,\r\n        'dialogs__item--selected': currentDialogId === _id}\r\n    )}\r\n        >\r\n        <div className=\"dialogs__item-avatar\" >\r\n            <Avatar user={friend}/>\r\n        </div>\r\n        <div className=\"dialogs__item-info\">\r\n            <div className=\"dialogs__item-info-top\">\r\n                <b>{friend.fullname}</b>\r\n                <span>\r\n                   { lastMessage.createdAt !== null ? getMessageTime(parseISO(lastMessage.createdAt)) : ''}\r\n                </span>\r\n            </div>\r\n            <div className=\"dialogs__item-info-bottom\">\r\n            <p>{renderLastMessage(lastMessage,userId)}</p>\r\n            {isMe && <Readed isMe={true} isReaded={lastMessage.readed}/>}\r\n            {\r\n            lastMessage.unreaded > 0 && lastMessage.readed === false ?\r\n             <div className=\"dialogs__item-info-bottom-count\">\r\n            {lastMessage.unreaded > 9 ? '+9' : lastMessage.unreaded}\r\n            </div>\r\n            :\r\n            null\r\n            }\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </Link>\r\n    )\r\n}\r\n\r\n\r\nexport default DialogItem;","import React from 'react';\r\nimport distanceInWordsToNow from 'date-fns/formatDistanceToNow'\r\nimport ruLocale from 'date-fns/locale/ru'\r\n\r\nconst Time = ({date}) => (\r\n    <>\r\n    {distanceInWordsToNow(date, {addSuffix: true, locale: ruLocale})}\r\n    </>\r\n)\r\n\r\n\r\nexport default Time;","import React from 'react';\r\nimport checkedSvg from '../../assets/image/1231.svg'\r\nimport noChecked from '../../assets/image/noChecked.svg'\r\n\r\nconst Readed = ({isMe,isReaded}) => {\r\n\r\n    return (\r\n        isMe && (isReaded ? (\r\n            <img \r\n            alt={`123`}\r\n            src={checkedSvg} \r\n            className=\"message__icon-readed\"\r\n            />\r\n        ) : \r\n        <img \r\n            src={noChecked} \r\n            alt={`123`}\r\n            className=\" message__icon-readed message__icon-readed--no\"\r\n            />\r\n           )\r\n    )\r\n    \r\n    }\r\n\r\n\r\nexport default Readed;","import React from 'react';\r\nimport './dialogs.scss'\r\nimport { Input, Empty } from 'antd'\r\n// import { Time, Readed } from 'components'\r\nimport { DialogItem } from 'components'\r\nimport orderBy from 'lodash/orderBy'\r\n\r\n\r\nconst Dialogs = ({items,userId,onSearch, inputValue,currentDialogId}) => {\r\n    return (\r\n    <div className=\"dialogs\">\r\n        <div className=\"dialogs__search\">\r\n        <Input.Search  placeholder=\"....\" style={{width: 200}} onChange={e => onSearch(e.target.value)} value={inputValue}/>\r\n        </div>\r\n    {items.length ? (\r\n        orderBy(items,[\"created_at\"],[\"desc\"]).map((item,i) => (\r\n            <DialogItem\r\n            key={i}\r\n            {...item}\r\n            userId={userId}\r\n            items={items}\r\n            friend={item.friend}\r\n            unreaded={0}\r\n            currentDialogId={currentDialogId}\r\n            isMe={item.author._id === userId}\r\n            /> \r\n        ))\r\n      )  : (<Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"Ничего не найдено\"/>)\r\n    }\r\n    </div>  \r\n    )\r\n   \r\n}\r\n\r\n\r\nexport default Dialogs;","import React from \"react\";\r\n\r\nimport { generateAvatarFromHash } from \"utils/helpers\";\r\n\r\nimport \"./avatar.scss\";\r\n\r\nconst Avatar = (props) => {\r\nconst { user,handleGetUserById, noWay, } = props\r\n  const handleOpenProfile =  (_id) => {\r\n    if(noWay) {\r\n      handleGetUserById(_id)\r\n    }\r\n }\r\n  if (user.avatar) {\r\n    return (\r\n      <>\r\n      <img \r\n        className=\"avatar\"\r\n        src={user.avatar}\r\n        alt={`Avatar ${user.fullname}`}\r\n        onClick={() => { handleOpenProfile(user.id)}}\r\n      />\r\n      </>\r\n    );\r\n  } else {\r\n    const { color, colorLighten } = generateAvatarFromHash(user.id);\r\n    const firstChar = user.fullname[0].toUpperCase();\r\n    return (\r\n      <div onClick={() => { handleOpenProfile(user.id)}}\r\n        style={{\r\n          background: `linear-gradient(135deg, ${color} 0%, ${colorLighten} 96.52%)`\r\n        }}\r\n        className=\"avatar avatar--symbol\"\r\n      >\r\n        {firstChar}\r\n      </div>\r\n    );\r\n      }\r\n};\r\n\r\n\r\nexport default Avatar;","import tinycolor from \"tinycolor2\";\r\n\r\nconst getCorrectIndex = number => {\r\n  if (number > 255) {\r\n    return 255;\r\n  }\r\n  if (number < 0) {\r\n    return 0;\r\n  }\r\n  return number > 255 ? 255 : number < 0 ? 0 : number;\r\n};\r\n\r\nexport default hash => {\r\n  const [r, g, b] = hash\r\n    .substr(hash.length - 3, hash.length)\r\n    .split(\"\")\r\n    .map(char => getCorrectIndex(char.charCodeAt(0)));\r\n  return {\r\n    color: tinycolor({ r, g, b })\r\n      .lighten(10)\r\n      .saturate(10)\r\n      .toHexString(),\r\n    colorLighten: tinycolor({ r, g, b })\r\n      .lighten(30)\r\n      .saturate(30)\r\n      .toHexString()\r\n  };\r\n};","import React, { useState } from 'react';\r\n\r\nimport classNames from 'classnames';\r\nimport { Button, Popover } from 'antd';\r\nimport { Link } from 'react-router-dom'\r\nimport './status.scss'\r\n\r\nconst Status = (props) => {\r\n  const { online,fullname,handleGetUserById,user } = props\r\n  const [btnVisiable, setBtnVisiable] = useState(false)\r\n  const handleVisiable = () => {\r\n    handleGetUserById(user._id)\r\n    setBtnVisiable(!btnVisiable)\r\n    // setIsVisiable(!isVisiable)\r\n  }\r\n    return (\r\n    <div className=\"chat__dialog-header\">\r\n    <div className=\"chat__dialog-header-center\">\r\n    <b className=\"chat__dialog-header-username\">{fullname}</b>\r\n      <div className=\"chat__dialog-header-status\">\r\n        <span className={classNames('status', { 'status--online': online })}>\r\n          {online ? 'онлайн' : 'офлайн'}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <Popover\r\n      visible={btnVisiable}\r\n      onVisibleChange={() => setBtnVisiable(!btnVisiable)}\r\n      className=\"chat__dialog-header-action\"\r\n      content={\r\n        <div className=\"chat__dialog-header-action-content\">\r\n          <p><Button onClick={handleVisiable}>Профиль</Button></p>\r\n          <p><Button><Link to={`/signIn`}>Выйти</Link></Button></p>\r\n        </div>\r\n      }\r\n      trigger=\"click\">\r\n      <div>\r\n        <Button type=\"link\" shape=\"circle\" icon=\"ellipsis\" aria-label='' />\r\n      </div>\r\n    </Popover>\r\n  </div>\r\n    )\r\n    }\r\n\r\n\r\nexport default Status;","import React, { Fragment } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button, Input } from \"antd\";\r\nimport { UploadField } from \"@navjobs/upload\";\r\nimport { Picker } from \"emoji-mart\";\r\n\r\nimport { UploadsFiles } from \"components\";\r\n\r\nimport \"./chatinput.scss\";\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst ChatInput = props => {\r\n  const {\r\n    emojiPickerVisible,\r\n    value,\r\n    addEmoji,\r\n    setValue,\r\n    handleSendMessage,\r\n    sendMessage,\r\n    toggleEmojiPicker,\r\n    attachments,\r\n    onSelectFiles,\r\n    isRecording,\r\n    onRecord,\r\n    onHideRecording,\r\n    removeAttachments,\r\n    isLoading\r\n  } = props;\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"chat-input\">\r\n        <div>\r\n          <div className=\"chat-input__smile-btn\">\r\n            <div className=\"chat-input__emoji-picker\">\r\n              {emojiPickerVisible && (\r\n                <Picker onSelect={emojiTag => addEmoji(emojiTag)} set=\"apple\" />\r\n              )}\r\n            </div>\r\n            <Button\r\n              onClick={toggleEmojiPicker}\r\n              type=\"link\"\r\n              shape=\"circle\"\r\n              icon=\"smile\"\r\n            />\r\n          </div>\r\n          {isRecording ? (\r\n            <div className=\"chat-input__record-status\">\r\n              <i className=\"chat-input__record-status-bubble\"></i>\r\n              Recording...\r\n              <Button\r\n                onClick={onHideRecording}\r\n                type=\"link\"\r\n                shape=\"circle\"\r\n                icon=\"close\"\r\n                className=\"stop-recording\"\r\n              />\r\n            </div>\r\n          ) : (\r\n            <TextArea\r\n              onChange={e => setValue(e.target.value)}\r\n              onKeyUp={handleSendMessage}\r\n              size=\"large\"\r\n              placeholder=\"Введите текст сообщения…\"\r\n              value={value}\r\n              autoSize={{ minRows: 1, maxRows: 6 }}\r\n            />\r\n          )}\r\n\r\n          <div className=\"chat-input__actions\">\r\n            <UploadField\r\n              onFiles={onSelectFiles}\r\n              containerProps={{\r\n                className: \"chat-input__actions-upload-btn\"\r\n              }}\r\n              uploadProps={{\r\n                accept: \".jpg,.jpeg,.png,.gif,.bmp\",\r\n                multiple: \"multiple\"\r\n              }}\r\n            >\r\n              <Button id=\"attach\" type=\"link\" shape=\"circle\" icon=\"camera\" />\r\n              <label htmlFor=\"attach\"></label>\r\n            </UploadField>\r\n            {isLoading ? (\r\n              <Button type=\"link\" shape=\"circle\" icon=\"loading\" />\r\n            ) : isRecording || value || attachments.length ? (\r\n              <Button\r\n                onClick={sendMessage}\r\n                type=\"link\"\r\n                shape=\"circle\"\r\n                icon=\"check-circle\"\r\n              />\r\n            ) : (\r\n              <div className=\"chat-input__record-btn\">\r\n                <Button\r\n                  onClick={onRecord}\r\n                  type=\"link\"\r\n                  shape=\"circle\"\r\n                  icon=\"audio\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {attachments.length > 0 && (\r\n          <div className=\"chat-input__attachments\">\r\n            <UploadsFiles\r\n              removeAttachments={removeAttachments}\r\n              attachments={attachments}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nChatInput.propTypes = {\r\n  className: PropTypes.string\r\n};\r\n\r\nexport default ChatInput;","import React from 'react';\r\nimport { Form, Icon, Input } from 'antd';\r\n\r\n\r\nconst FormField = ({touched,type, errors,name, icon, values, handleBlur,handleChange,placeholder}) => {\r\n    return ( \r\n        <Form.Item \r\n        validateStatus={!touched[name] ? '' : errors[name] ? 'error' : 'success'} \r\n        hasFeedback\r\n        help={!touched[name] ? '' : errors[name]}>\r\n            <Input\r\n              id={name}\r\n              type={type}\r\n              size=\"large\"\r\n              prefix={<Icon type={icon} style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n              placeholder={placeholder}\r\n              value={values[name]}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n            />\r\n        </Form.Item>\r\n     );\r\n}\r\n \r\nexport default FormField;","import React from 'react'\r\nimport {Icon,Button, Modal,Select, Input, Form } from 'antd'\r\nimport { Dialogs  } from 'containers'\r\nimport './sidebar.scss'\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\nconst SideBar = ({\r\n    user,\r\n    users, \r\n    onClose, \r\n    onShow,\r\n    visible, \r\n    Isloading,\r\n    inputValue, \r\n    handleChange,\r\n    handleSearch,\r\n    onSelectUser,\r\n    onAddDialog,\r\n    messageValue,\r\n    handleChangeMessage,\r\n    selectedUserId\r\n}) => {\r\n    const options = users.map(user => <Option key={user._id}>{user.fullname}</Option>);\r\n    return (  \r\n        <div className='chat__sidebar'>\r\n        <div className='chat__sidebar-header'>\r\n           <div>\r\n              <Icon type=\"team\" aria-label=\"\"/>\r\n              <span>Список диалогов</span>\r\n           </div>\r\n           <Button onClick={onShow} type='link' shape=\"circle\" icon=\"form\"/>\r\n        </div>\r\n        <div className=\"chat__sidebar-dialogs\">\r\n        { user && <Dialogs userId={ user && user._id}/>}\r\n        </div>\r\n        <Modal\r\n        title=\"Add dialog\"\r\n        visible={visible}\r\n        onOk={onAddDialog}\r\n        onCancel={onClose}\r\n        footer={[\r\n            <Button key=\"black\" onClick={onClose} style={{width: 100}}>\r\n                Закрыть\r\n            </Button>,\r\n            <Button \r\n            style={{width: 100}}\r\n            disabled={!messageValue}\r\n            key=\"submit\" \r\n            type=\"primary\" \r\n            loading={Isloading} \r\n            onClick={onAddDialog}>\r\n                Создать\r\n            </Button>\r\n        ]}>\r\n            <Form >\r\n            <Form.Item label=\"Введите имя пользователя или E-Mail\">\r\n            <Select\r\n                showSearch\r\n                value={inputValue}\r\n                placeholder={'Найти пользователя'}\r\n                style={{ width: '100%'}}\r\n                defaultActiveFirstOption={false}\r\n                showArrow={false}\r\n                onSelect={onSelectUser}\r\n                filterOption={false}\r\n                onSearch={handleSearch}\r\n                onChange={handleChange}\r\n                notFoundContent={null}\r\n            >\r\n                {options}\r\n            </Select>\r\n            </Form.Item>\r\n            { selectedUserId && <Form.Item label=\"Введите сообщение\">\r\n            <TextArea \r\n            placeholder=\"Ваше Сообщение\"\r\n            value={messageValue}\r\n            onChange={handleChangeMessage}\r\n            autosize={{minRows: 2, maxRows: 6}}/>\r\n            </Form.Item>}\r\n            </Form>\r\n        </Modal>\r\n     </div>\r\n     );\r\n}\r\n \r\nexport default SideBar;","import React, { useState, useEffect } from 'react'\r\nimport { Upload, Modal } from 'antd';\r\n\r\n\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\nconst UploadsFiles = (props) => {\r\n  const { attachments,removeAttachments } = props\r\n\r\n  const [previewVisible, setPreviewVisible] = useState(false)\r\n  const [fileList, setFileList] = useState()\r\n  const [previewImage, setPreviewImage] = useState()\r\n\r\n  useEffect( () => {\r\n    setFileList(attachments)\r\n  },[attachments])\r\n\r\n const handleCancel = () => setPreviewVisible(false);\r\n\r\n const handlePreview = async file => {\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n    setPreviewImage(file.url || file.preview)\r\n    setPreviewVisible(true)\r\n  };\r\n\r\n  const handleChange = ({ fileList }) => setFileList(fileList);\r\n\r\n  return (\r\n    <div className=\"clearfix\">\r\n        <Upload\r\n          action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n          listType=\"picture-card\"\r\n          fileList={fileList}\r\n          onPreview={handlePreview}\r\n          onChange={handleChange}\r\n          onRemove={file => removeAttachments(file)}\r\n        >\r\n        </Upload>\r\n        <Modal visible={previewVisible} footer={null} onCancel={handleCancel}>\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n        </Modal>\r\n      </div>\r\n  )\r\n}\r\nexport default UploadsFiles;\r\n \r\n","import React, { useState } from 'react'\r\nimport { Avatar,Edit } from 'containers'\r\nimport { getMessageTime } from 'utils/helpers'\r\nimport './profile.scss'\r\nimport parseISO from 'date-fns/parseISO'\r\nimport { Modal } from 'antd';\r\nimport { ContactsFilled,FileImageFilled,LoadingOutlined,MailOutlined,IdcardOutlined,HddOutlined } from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom' \r\n\r\nexport default function Profile(props) {\r\n    const { userData,uploadAvatar,isDoneAvatar,setIsDoneAvatar,userId,currentDialogId,setIsVisiable, isVisiable, previewImage,setPreviewImage } = props\r\n        const [modal, setModal] = useState(false)\r\n        console.log(userData)\r\n    return (\r\n            userData !== null  && \r\n            <>\r\n           <div className=\"overlay\"></div>\r\n           <div className=\"modal_container\">\r\n               <div className=\"modal_container__main\">\r\n               \r\n               {userData.id  &&  \r\n               <div className=\"modal_container__main-header\">\r\n                   <div className=\"modal_container__main-header-upper\">\r\n                       <p>Settings</p>\r\n                       <div className=\"modal_container__main-header-upper-right\">\r\n                   { userId === userData._id && \r\n                <div>\r\n            <p onClick={() => setModal(!modal)}>\r\n         Edit\r\n        </p>\r\n        <Modal\r\n          visible={modal}\r\n          width=\"400px\"\r\n          onOk={() => {setModal(!modal)}}\r\n          onCancel={() => {setModal(!modal)}}\r\n          footer={''}\r\n          centered\r\n        >\r\n         <Edit setModal={setModal} modal={modal}/>\r\n        </Modal>\r\n                </div>\r\n                }\r\n                <p onClick={() => setIsVisiable(!isVisiable)}>Close</p>\r\n                </div>\r\n                </div>\r\n                <div>\r\n                { isDoneAvatar && <LoadingOutlined className=\"profile_loader\" style={{color: 'black'}}/>}\r\n                </div>\r\n                    <div className=\"modal_container__main-header-block\">\r\n                   <div className=\"modal_container__main-header-avatar\" onClick={() => setPreviewImage(userData.avatar)}>\r\n                    <Avatar user={userData} />\r\n                    </div>\r\n                    <div className=\"modal_container__main-header-info\">\r\n                    <p>{userData.fullname}</p>\r\n                    <p className=\"modal_container__main-header-info-status\">{ !userData.isOnline ? `last seen ${getMessageTime(parseISO(userData.last_seen))}`: 'Online'}</p>\r\n                    </div>\r\n                    { userId === userData._id ? \r\n                    (\r\n                    <>\r\n                    <input type=\"file\" id=\"file\" onChange={(e) => {\r\n                        setIsDoneAvatar(true)\r\n                        uploadAvatar(e.target.files[0])\r\n                    }}/>\r\n                    <label htmlFor=\"file\" className=\"btn-3\"><FileImageFilled style={{fontSize: '22px'}}/></label> \r\n                    </>\r\n                    )\r\n                     : \r\n                     ( <div className=\"modal_container__main-header-info-redirect\">\r\n                         <Link to={`/dialog/${currentDialogId}`} onClick={ () => { setIsVisiable(!isVisiable)}}><ContactsFilled style={{fontSize: '30px'}}/></Link>\r\n                       </div>\r\n                     )}\r\n                     </div>\r\n                </div>}\r\n                <div className=\"modal_container__main-body\">\r\n                    <div className=\"modal_container__main-body-item\">\r\n                        <MailOutlined />\r\n                        <div>{userData.email}</div>\r\n                        <div>Электронная почта</div>\r\n                    </div>\r\n                    <div className=\"modal_container__main-body-item\">\r\n                        <MailOutlined />\r\n                        {userData.bio.startsWith(\"https://\") ?  <a target=\"_blank\" rel=\"noopener noreferrer\" href={userData.bio}>{userData.bio}</a> :\r\n                        <div>{userData.bio}</div>\r\n                            }\r\n                        <div>Bio</div>\r\n                    </div>\r\n                    <div className=\"modal_container__main-body-item\">\r\n                        <IdcardOutlined />\r\n                        <div>{userData.id}</div>\r\n                        <div>Идентификатор</div>\r\n                    </div>\r\n                    <div className=\"modal_container__main-body-item\">\r\n                        <HddOutlined />\r\n                        <div>{userData.createdAt}</div>\r\n                        <div>Дата регистрации</div>\r\n                    </div>\r\n                    {/* <div className=\"modal_container__main-body-item\">\r\n                        <CheckOutlined />\r\n                        <div>{userData.confirmed ? `Да` : `Нет`}</div>\r\n                        <div>Подтвержден</div>\r\n                    </div> */}\r\n                    <hr style={{color: '#ebebeb', marginTop: 20, marginBottom: 20}}/>\r\n                </div>\r\n               </div>\r\n            </div>\r\n            <Modal\r\n           width=\"650px\"\r\n           style={{zIndex: 9999999999}}\r\n           visible={!!previewImage}\r\n           footer={null}\r\n           onCancel={() => setPreviewImage(null)}\r\n            >\r\n          <img src={previewImage} style={{width: '100%'}} alt=\"prewiew\"/>\r\n          </Modal>\r\n            </>\r\n        )\r\n   \r\n}\r\n","import React from 'react';\r\nimport { Input } from 'antd';\r\nimport { Button } from 'components'\r\nimport './edit.scss'\r\nconst Edit = ({value,handleChangeInput,handleChangeData, modal, setModal}) => {\r\n    return ( \r\n        <div className=\"edit\">\r\n            <h4>Edit profile</h4>\r\n            <div className=\"pd\">\r\n            <Input placeholder=\"fullname\" name=\"fullname\" value={value.fullname} onChange={handleChangeInput}/>\r\n            <Input placeholder=\"email\" name=\"email\" value={value.email} onChange={handleChangeInput}/>\r\n            <Input placeholder=\"bio\" name=\"bio\" value={value.bio} onChange={handleChangeInput}/>\r\n            <div className=\"edit__btn\">\r\n            <Button onClick={() => {\r\n                 handleChangeData()\r\n                 setModal(!modal)\r\n             }}>Edit</Button>\r\n            </div>\r\n            </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Edit;","import React from 'react';\r\nimport { Form, Icon, Input } from 'antd';\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, WhiteBlock } from 'components'\r\n\r\nconst LoginForm = (props) => {\r\n\r\n  const {\r\n    values,\r\n    touched,\r\n    errors,\r\n    handleChange,\r\n    handleBlur,\r\n    handleSubmit,\r\n  } = props;\r\n\r\n  return ( \r\n    <div>\r\n      <div className=\"auth__top\">\r\n           <h2>Войти в аккаунт</h2>\r\n           <p>Пожалуйста, войдите в свой аккаунт</p>\r\n       </div>\r\n       <WhiteBlock>\r\n       <Form onSubmit={handleSubmit} className=\"login-form\">\r\n           <Form.Item \r\n           validateStatus={!touched.email ? '' : errors.email ? 'error' : 'success'} \r\n           hasFeedback\r\n           help={!touched.email ? '' : errors.email}>\r\n               <Input\r\n                 id=\"email\"\r\n                 size=\"large\"\r\n                 prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                 placeholder=\"E-Mail\"\r\n                 value={values.email}\r\n                 onChange={handleChange}\r\n                 onBlur={handleBlur}\r\n               />\r\n           </Form.Item>\r\n           <Form.Item \r\n           validateStatus={!touched.password ? '' : errors.password ? 'error' : 'success'} \r\n           hasFeedback\r\n           help={!touched.password ? '' : errors.password}>\r\n               <Input\r\n                 id=\"password\"\r\n                 size=\"large\"\r\n                 type=\"password\"\r\n                 value={values.password}\r\n                 prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                 placeholder=\"Пароль\"\r\n                 onChange={handleChange}\r\n                 onBlur={handleBlur}\r\n               />\r\n           </Form.Item>\r\n           <Form.Item>\r\n             <Button type=\"primary\" htmlType=\"submit\" size=\"large\" className=\"login-form-button\" onClick={handleSubmit} >\r\n              Войти\r\n             </Button>\r\n             <Link to=\"/signUp\" className=\"auth__register-link\" >Зарегистрироваться</Link>\r\n           </Form.Item>\r\n         </Form>\r\n         </WhiteBlock>\r\n   </div>\r\n    );\r\n}\r\n \r\nexport default LoginForm;","export default ({ isAuth,values,errors }) => {\r\n  const rules = {\r\n\r\n    email: value => {\r\n      if (!value) {\r\n          errors.email = 'Введите E-Mail';\r\n        } else if (\r\n          !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(\r\n            value\r\n          )\r\n        ) {\r\n          errors.email = 'Неверный E-Mail';\r\n        }\r\n        },\r\n    password: value => {\r\n    if(!value){\r\n      errors.password = 'Введите пароль'\r\n    }\r\n    // if (!isAuth && !/(?=.*[0-9])[a-zA-Z!@#$%^&*]{4,}/i.test(value)) {\r\n    // errors.password = \"Слижком легкий пароль\"\r\n    //     }\r\n    //   },\r\n  },\r\n    password2: value => {\r\n        if(!isAuth && value !== values.password){\r\n          errors.password2 = 'Пароли не совпадают'\r\n        }\r\n        if(!value) {\r\n        errors.password2 = 'Введите пароль';\r\n        }\r\n        \r\n          },\r\n      fullname: value => {\r\n        if(!isAuth && !value){\r\n          errors.fullname = 'Укажите свое имя и фамилию'\r\n        }\r\n      }\r\n    }\r\n\r\n  Object.keys(values).forEach( key => rules[key] && rules[key](values[key],errors))\r\n}\r\n\r\n","const initialState = {\r\n    items: [],\r\n    currentDialogId: window.location.pathname.split('dialog/')[1],\r\n    isLoading: false,\r\n}\r\n\r\nexport default ( state = initialState, {type, payload}) => {\r\n    switch (type) {\r\n        case 'DIALOGS:SET_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: payload\r\n            };\r\n        case 'DIALOGS:SET_CURRENT_DIALOG_ID':\r\n            return {\r\n                ...state,\r\n                currentDialogId: payload\r\n            };\r\n        case 'DIALOGS:CHANGE_MESSAGE':\r\n            return {\r\n                ...state,\r\n                items: {\r\n                    ...state.items.lastMessage,\r\n                    readed: payload\r\n                }\r\n            };    \r\n        case 'DIALOGS:SET_UNREADED':\r\n            return {\r\n                ...state,\r\n                items: state.items.map(dialog => {\r\n                dialog.lastMessage.unreaded = dialog.messages.filter((item) => item.readed !== true && item.user !== payload).length\r\n               \r\n                    return dialog\r\n                })\r\n                \r\n        };\r\n        case 'DIALOGS:LAST_MESSAGE_READED_STATUS':\r\n            return {\r\n                ...state,\r\n                items: state.items.map(dialog => {\r\n                    if (dialog._id === payload.dialogId) {\r\n                      dialog.lastMessage.readed = true;\r\n                    }\r\n                    return dialog;\r\n                  }),\r\n        };    \r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    items: [],\r\n    isLoading: false\r\n}\r\n\r\nexport default ( state = initialState, {type, payload}) => {\r\n    switch (type) {\r\n        case 'MESSAGES:ADD_MESSAGE':\r\n            return {\r\n              ...state,\r\n              items: [...state.items, payload],\r\n            };\r\n        case 'MESSAGES:SET_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: payload,\r\n                isLoading:false\r\n            };\r\n         case 'MESSAGES:REMOVE_MESSAGE':\r\n            return {\r\n                ...state,\r\n                items: state.items.filter(message => message._id !== payload),\r\n            };\r\n            case 'DIALOGS:LAST_MESSAGE_READED_STATUS':\r\n                return {\r\n                  ...state,\r\n                  items: state.items.map(message => {\r\n                    if (message.dialog._id === payload.dialogId) {\r\n                      message.readed = true;\r\n                    }\r\n                    return message;\r\n                  }),\r\n                };\r\n        case 'MESSAGES:SET_IS_LOADING':\r\n            return {\r\n                ...state,\r\n                isLoading: payload\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    data: null,\r\n    userData: null,\r\n    token: window.localStorage.token,\r\n    isAuth: !!window.localStorage.token,\r\n}\r\n\r\nexport default ( state = initialState, {type, payload}) => {\r\n    switch (type) {\r\n        case 'USER:SET_DATA':\r\n            return {\r\n                ...state,\r\n               data: payload,\r\n               isAuth: true,\r\n               token: window.localStorage.token\r\n            };\r\n        case 'USER:CHANGE_DATA':\r\n            return {\r\n                ...state,\r\n                userData: {\r\n                   ...state.userData,\r\n                   fullname: payload.fullname,\r\n                   email: payload.email,\r\n                   bio: payload.bio\r\n               },\r\n        };\r\n        case 'USER:SET_USER_DATA':\r\n            return {\r\n                ...state,\r\n                userData: payload,\r\n            };    \r\n        case 'USER:SET_AVATAR':\r\n            return {\r\n                ...state,\r\n                userData: {\r\n                    ...state.userData,\r\n                    avatar: payload\r\n                }\r\n            };\r\n        case 'USER:SET_IS_AUTH':\r\n            return {\r\n                ...state,\r\n                isAuth: payload\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    items: []\r\n  };\r\n  export default (state = initialState, { type, payload }) => {\r\n    switch (type) {\r\n      case \"ATTACHMENTS:SET_ITEMS\":\r\n        return {\r\n          ...state,\r\n          items: payload\r\n        };\r\n      case \"ATTACHMENTS:REMOVE_ITEM\":\r\n        return {\r\n          ...state,\r\n          items: state.items.filter(item => item.uid !== payload.uid)\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  };","import { combineReducers } from 'redux'\r\n\r\nimport dialogs from './dialogs'\r\nimport messages from './messages'\r\nimport user from './user'\r\nimport attachments from './attachments'\r\n\r\n\r\nexport default combineReducers({\r\n    dialogs,\r\n    messages,\r\n    user,\r\n    attachments\r\n})","import { createStore, applyMiddleware, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport rootReducers from './reducers'\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst middleware = [thunk];\r\nconst store = createStore(rootReducers, composeEnhancers(\r\n    applyMiddleware(...middleware)\r\n))\r\n\r\n\r\nexport default store","import LoginForm from './containers/LoginForm'\r\n\r\nexport default LoginForm","import LoginForm from '../components/LoginForm'\r\nimport { withFormik } from 'formik'\r\nimport validations from 'utils/validations'\r\n\r\nimport { userActions } from 'redux/actions'\r\nimport store from 'redux/store'\r\n\r\nconst LoginFormContainer = withFormik({\r\n    mapPropsToValues: () => ({\r\n        email: '',\r\n        password: ''\r\n    }),\r\n    validate: values => {\r\n      let errors = {};\r\n      validations({ isAuth: true,values,errors })\r\n      return errors\r\n    },\r\n    handleSubmit: (values, { setSubmitting, props }) => {\r\n    store\r\n      .dispatch(userActions.fetchUserLogin(values))\r\n      .then(({ status }) => {\r\n        if (status === 'success') {\r\n          props.history.push('/');\r\n        }\r\n        // setSubmitting(false);\r\n      })\r\n      .catch(() => {\r\n        setSubmitting(false);\r\n      });\r\n  },\r\n    displayName: 'LoginForm',\r\n  })(LoginForm);\r\n\r\n  \r\n\r\n  export default LoginFormContainer;\r\n ","import React from 'react';\r\nimport { Form, } from 'antd';\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, WhiteBlock, FormField } from 'components'\r\n\r\n\r\n\r\nconst RegisterForm = props => {\r\n  const {\r\n    values,\r\n    touched,\r\n    errors,\r\n    handleChange,\r\n    handleBlur,\r\n    handleSubmit,\r\n    isValid,\r\n    dirty,\r\n  } = props;\r\n  \r\n  return ( \r\n    <div>\r\n         <div className=\"auth__top\">\r\n           <h2>Регистрация</h2>\r\n           <p>Для входа в чат, вам нужно зарегистрироваться</p>\r\n       </div>\r\n       <WhiteBlock>\r\n       <Form onSubmit={handleSubmit} className=\"login-form\">\r\n         <FormField \r\n         name=\"email\"\r\n         icon=\"mail\"\r\n         placeholder=\"E-Mail\"\r\n         handleChange={handleChange}\r\n         handleBlur={handleBlur}\r\n         touched={touched}\r\n         errors={errors}\r\n         values={values}\r\n         />\r\n          <FormField \r\n         name=\"fullname\"\r\n         icon=\"user\"\r\n         placeholder=\"Ваше имя\"\r\n         handleChange={handleChange}\r\n         handleBlur={handleBlur}\r\n         touched={touched}\r\n         errors={errors}\r\n         values={values}\r\n         />\r\n          <FormField \r\n         name=\"password\"\r\n         icon=\"lock\"\r\n         placeholder=\"Пароль\"\r\n         handleChange={handleChange}\r\n         handleBlur={handleBlur}\r\n         touched={touched}\r\n         errors={errors}\r\n         values={values}\r\n         type=\"password\"\r\n         />\r\n         <FormField \r\n         name=\"password2\"\r\n         icon=\"lock\"\r\n         type=\"password\"\r\n         placeholder=\"Повторить пароль\"\r\n         handleChange={handleChange}\r\n         handleBlur={handleBlur}\r\n         touched={touched}\r\n         errors={errors}\r\n         values={values}\r\n         />\r\n         <FormField \r\n         name=\"bio\"\r\n         icon=\"message\"\r\n         type=\"text\"\r\n         placeholder=\"Расскажите о себе\"\r\n         handleChange={handleChange}\r\n         handleBlur={handleBlur}\r\n         touched={touched}\r\n         errors={errors}\r\n         values={values}\r\n         />\r\n           <Form.Item>\r\n           {dirty && !isValid ? <span>Ошибка!</span> : '' }\r\n             <Button type=\"primary\" onClick={handleSubmit} htmlType=\"submit\" size=\"large\" className=\"login-form-button\" >\r\n               Зарегистрироваться\r\n             </Button>\r\n             <Link to=\"/signIn\" className=\"auth__register-link\">Войти в аккаунт</Link>\r\n           </Form.Item>\r\n         </Form> \r\n         \r\n       </WhiteBlock>\r\n   </div>\r\n    );\r\n}\r\n \r\nexport default RegisterForm;\r\n","import RegisterForm from './containers/RegisterForm'\r\n\r\nexport default RegisterForm","import RegisterForm from '../components/RegisterForm'\r\nimport { withFormik } from 'formik'\r\nimport validations from 'utils/validations'\r\nimport { openDialogs } from 'utils/helpers'\r\nimport { userActions } from 'redux/actions'\r\nimport get from 'lodash/get';\r\nimport store from 'redux/store'\r\n\r\nexport default  withFormik({\r\n    mapPropsToValues: () => ({\r\n        email: '',\r\n        fullname: '',\r\n        password: '',\r\n        password2: '',\r\n        bio: ''\r\n    }),\r\n    validate: values => {\r\n      let errors = {};\r\n      validations({ isAuth: false, values, errors })\r\n      return errors\r\n    },\r\n    handleSubmit: (values, { setSubmitting,props }) => {\r\n      store.dispatch(userActions.fetchUserRegister(values))\r\n      .then( () => {\r\n        props.history.push('/signin');\r\n        // setSubmitting(false)\r\n      })\r\n      .catch(err => {\r\n        if (get(err, 'response.data.message.errmsg', '').indexOf('dup') >= 0) {\r\n          openDialogs({\r\n            title: 'Ошибка',\r\n            text: 'Аккаунт с такой почтой уже создан.',\r\n            type: 'error',\r\n            duration: 5000\r\n          });\r\n        } else {\r\n          openDialogs({\r\n            title: 'Ошибка',\r\n            text: 'Возникла серверная ошибка при регистрации. Повторите позже.',\r\n            type: 'error',\r\n            duration: 5000\r\n          });\r\n        }\r\n        // setSubmitting(false);\r\n      });\r\n    },\r\n    displayName: 'RegisterForm',\r\n  })(RegisterForm);","import React,{useState, useEffect} from 'react'\r\nimport { Result, Button, Spin } from 'antd';\r\nimport { userApi } from 'utils/api'\r\nimport { WhiteBlock } from 'components'\r\n\r\nconst renderTextInfo = ({ hash, verified }) => {\r\n    if (hash) {\r\n      if (verified) {\r\n        return {\r\n          status: 'success',\r\n          title: 'Готово!',\r\n          message: 'Аккаунт успешно подтвержден!',\r\n        };\r\n      } else {\r\n        return {\r\n          status: 'error',\r\n          title: 'Ошибка',\r\n          message: 'Вы указали несуществующий или неверный хеш.',\r\n        };\r\n      }\r\n    } else {\r\n      return {\r\n        status: 'info',\r\n        title: 'Подтвердите почту',\r\n        message: 'Ссылка с подтверждением аккаунта отправлена на E-Mail.',\r\n      };\r\n    }\r\n  };\r\n  \r\n  const CheckInfo = ({ location, history }) => {\r\n    const hash = location.search.split('hash=')[1];\r\n    const [verified, setVerified] = useState(false);\r\n    const [checking, setChecking] = useState(!!hash);\r\n    const [info, setInfo] = useState(renderTextInfo({ hash, checking, verified }));\r\n  \r\n    \r\n\r\n    useEffect(() => {\r\n\r\n      const setStatus = ({ checking, verified }) => {\r\n        setInfo(renderTextInfo({ hash, checking, verified }));\r\n        setVerified(verified);\r\n        setChecking(checking);\r\n      };\r\n\r\n      if (hash) {\r\n        userApi\r\n          .verify(hash)\r\n          .then(() => {\r\n            setStatus({ verified: true, checking: false });\r\n          })\r\n          .catch(() => {\r\n            setStatus({ verified: false, checking: false });\r\n          });\r\n      }\r\n    }, [hash]);\r\n  \r\n    return (\r\n      <div className=\"verify-block\">\r\n        <WhiteBlock>\r\n          {!checking ? (\r\n            <Result\r\n              status={info.status}\r\n              title={info.title}\r\n              subTitle={info.message}\r\n              extra={\r\n                info.status === 'success' &&\r\n                verified && (\r\n                  <Button type=\"primary\" onClick={() => history.push('/signin')}>\r\n                    Войти\r\n                  </Button>\r\n                )\r\n              }\r\n            />\r\n          ) : (\r\n            <div className=\"verify-block__loading\">\r\n              <Spin size=\"large\" />\r\n            </div>\r\n          )\r\n          }\r\n        </WhiteBlock>\r\n      </div>\r\n    );\r\n  };\r\n  \r\n\r\nexport default CheckInfo;","import React from 'react';\r\nimport './auth.scss'\r\nimport { LoginForm, RegisterForm } from 'modules'\r\nimport { Route,Switch } from \"react-router-dom\";\r\nimport CheckInfo from './conponents/CheckInfo';\r\n\r\nconst Auth = () =>  {\r\n\r\nreturn ( \r\n        <section className=\"auth\">\r\n            <div className=\"auth__content\">\r\n            <Switch>\r\n                <Route exact path={[\"/\",\"/signIn\"]} component={LoginForm} />\r\n                <Route exact path=\"/signUp\" component={RegisterForm}/>\r\n                <Route exact path=\"/signUp/verify\" component={CheckInfo}/>\r\n            </Switch>\r\n            </div>\r\n        </section>\r\n        );\r\n}\r\n  \r\nexport default Auth;","import React,{useEffect,useState} from 'react';\r\nimport './home.scss'\r\nimport { Messages,ChatInput,Status, SideBar  } from 'containers'\r\nimport { withRouter } from 'react-router'\r\nimport { dialogsActions } from 'redux/actions'\r\nimport { connect } from 'react-redux'\r\nimport { Profile } from 'containers'\r\n\r\nconst Home = (props) =>  {\r\n   const [isVisiable, setIsVisiable] = useState(false)\r\n   \r\n   useEffect(() => {\r\n     const { setCurrentDialogId } = props;\r\n     const { pathname } = props.location;\r\n     const dialogId = pathname.split('/').pop();\r\n     setCurrentDialogId(dialogId);\r\n   }, [props]);\r\n \r\n   useEffect( () => {\r\n     window.addEventListener('click', e => {  \r\n     return e.target.className === 'overlay' ? setIsVisiable(false) : null\r\n   })\r\n  },[])\r\n   \r\nreturn ( \r\n   <section className=\"home\">\r\n     {isVisiable ? <Profile isVisiable={isVisiable} setIsVisiable={setIsVisiable}/> : null}\r\n   <div className=\"chat\">\r\n     <SideBar />\r\n     {(\r\n       <div className=\"chat__dialog\">\r\n         <Status setIsVisiable={setIsVisiable} isVisiable={isVisiable}/>\r\n         <Messages setIsVisiable={setIsVisiable} isVisiable={isVisiable}/>\r\n         <div className=\"chat__dialog-input\">\r\n           <ChatInput />\r\n         </div>\r\n       </div>\r\n     )}\r\n   </div>\r\n </section>\r\n        );\r\n}\r\n  \r\nexport default withRouter(connect(({dialogs})=> dialogs,dialogsActions)(Home));","import React from 'react';\r\nimport { Auth, Home } from 'pages'\r\nimport { Route,Redirect, Switch } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nconst App = (props) => {\r\n  const { isAuth } = props\r\n \r\n  return (\r\n    <>\r\n    <Switch>\r\n    <Route exact path={[\"/signIn\",\"/signUp\",\"/signUp/verify\"]} component={Auth} />\r\n    <Route \r\n    path=\"/\"\r\n    render={()=> (isAuth ? <Home /> : <Redirect to=\"/signIn\"/>)}/>\r\n    </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect(({user}) => ({isAuth: user.isAuth}))(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from 'App';\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport './styles/index.scss'\r\nimport { Provider } from 'react-redux'\r\nimport store from \"./redux/store\"\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { userActions } from 'redux/actions'\r\n\r\nstore.dispatch(userActions.fetchUserData())\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n  <Router>\r\n  <App />\r\n  </Router>\r\n    </Provider>\r\n  , document.getElementById('root'));\r\n\r\n\r\n"],"sourceRoot":""}